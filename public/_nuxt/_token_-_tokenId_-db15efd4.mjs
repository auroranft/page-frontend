import{d as V,r as I,w as O,e as P,o,c as d,a as e,n as H,i as r,s as T,v as g,t as b,h as M,I as K,g as L,J as A,k as S,j as U,K as Q,_ as W,L as G,u as J,F as X,f as Z,M as ee,l as te,p as ne,m as ae}from"./entry-58e7afa6.mjs";import{u as Y,b as se,a as j}from"./useSubmit-99431132.mjs";import{u as z}from"./useWeb3-5d18194c.mjs";import{T as oe,M as B,a as x}from"./Market_abi-93ee176c.mjs";import{_ as ie,a as le,b as de}from"./historyList-dda1ebec.mjs";import{u as re}from"./asyncData-5962a627.mjs";var ue=[{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"minterAddress",type:"address"}],name:"addMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minterAddress",type:"address"}],name:"removeMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI_",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];const ce={style:{display:"inline-block"}},pe=["disabled"],ye={class:"modal fade",id:"modalNftList",tabindex:"-1","aria-labelledby":"modalNftListLabel","aria-hidden":"true"},me={class:"modal-dialog modal-lg modal-dialog-centered"},fe={class:"modal-content"},ve=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"modalNftListLabel"},"NFT List"),e("button",{id:"closeModalNftList",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_e={class:"modal-body"},be={class:"row g-5"},he={class:"col"},ke={class:"my-4"},Te=e("label",{for:"token",class:"form-label"},"Token",-1),ge=e("div",{class:"invalid-feedback"}," You must input token ",-1),Ie={class:"my-4"},xe=e("label",{for:"tokenId",class:"form-label"},"TokenId",-1),we=e("div",{class:"invalid-feedback"}," You must input tokenId ",-1),$e={class:"my-4"},Ae=e("label",{for:"payToken",class:"form-label"},"PayToken",-1),Me=e("div",{class:"invalid-feedback"}," You must input payToken ",-1),Le={class:"my-4"},Re=e("label",{for:"payAmount",class:"form-label"},"PayAmount",-1),Ne=e("div",{class:"invalid-feedback"}," You must input payAmount ",-1),Be={class:"my-4"},Ce=e("label",{for:"isBid",class:"form-label"},"Bid",-1),Fe={class:"form-check form-check-inline"},De=["checked"],Se=e("label",{class:"form-check-label",for:"bidLimited"},"Limited",-1),Ue={class:"form-check form-check-inline"},Ve=["checked"],qe=e("label",{class:"form-check-label",for:"bidAuction"},"Auction",-1),Ee={key:0,class:"my-4"},Oe={for:"bonusRate",class:"form-label"},Pe=["max","required"],Ye={key:1,class:"my-4"},je=e("label",{for:"endTime",class:"form-label"},"EndTime",-1),ze=["required"],He=e("div",{class:"invalid-feedback"}," You must input endTime ",-1),Ke={class:"form-check"},Qe=e("label",{class:"form-check-label fw-lighter",for:"agreenTerms"},"I approve NFTrade's Terms & Conditions",-1),We=e("hr",{class:"my-4"},null,-1),Ge=["disabled"],Je={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Xe=V({__name:"nftList",props:{nftInfo:null},setup(v){const w=v,i=I();i.value=w.nftInfo;const u=Y(),c=se(),p=j(),{account:y,library:m,chainId:f}=z();O([y],()=>{!!y.value&&!!m.value&&!!f.value&&N()});const t=I({token:i.value.token,tokenId:i.value.tokenId,isBid:!1,payToken:null,payAmount:null,bonusRate:0,endTime:Date.parse(new Date().toString())/1e3+10*60,agreenTerms:!1}),n=I(!0),R=I(0),$=I(0);async function N(){t.value.token=i.value.token,t.value.tokenId=i.value.tokenId,t.value.payToken=oe[f.value];const l=new m.value.eth.Contract(B,x[f.value]);$.value=await l.methods.maxBonusRate().call({from:y.value});const a=await l.methods.nftById(i.value.nftId).call(),s={...i,...a};i.value=s}function _(l){n.value=l}function h(l){R.value=l.target.value}async function k(){if(c.value=!0,u.value=!0,t.value.token&&t.value.tokenId&&t.value.payToken&&t.value.payAmount&&t.value.agreenTerms){t.value.isBid=n.value;const l=new m.value.eth.Contract(ue,i.value.token);await l.methods.isApprovedForAll(y.value,x[f.value]).call()||await l.methods.setApprovalForAll(x[f.value],!0).send({from:y.value}),new m.value.eth.Contract(B,x[f.value]).methods.list(t.value.token,t.value.tokenId,t.value.isBid,t.value.payToken,m.value.utils.toWei(t.value.payAmount.toString(),"ether"),t.value.bonusRate,t.value.endTime).send({from:y.value}).then(()=>{u.value=!1,p.value=Date.parse(new Date().toString()),document.getElementById("closeModalNftList").click()}).catch(F=>{console.info(F),u.value=!1})}else u.value=!1}return P(()=>{N()}),(l,a)=>(o(),d("div",ce,[e("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#modalNftList",disabled:i.value.onSale}," List ",8,pe),e("div",ye,[e("div",me,[e("div",fe,[ve,e("div",_e,[e("div",be,[e("div",he,[e("form",{class:H(`needs-validation ${r(c)?"was-validated":""}`),novalidate:""},[e("div",ke,[Te,T(e("input",{type:"text",readonly:"",class:"form-control-plaintext",id:"token","onUpdate:modelValue":a[0]||(a[0]=s=>t.value.token=s),required:""},null,512),[[g,t.value.token]]),ge]),e("div",Ie,[xe,T(e("input",{type:"text",readonly:"",class:"form-control-plaintext",id:"tokenId","onUpdate:modelValue":a[1]||(a[1]=s=>t.value.tokenId=s),required:""},null,512),[[g,t.value.tokenId]]),we]),e("div",$e,[Ae,T(e("input",{type:"text",readonly:"",class:"form-control-plaintext",id:"payToken","onUpdate:modelValue":a[2]||(a[2]=s=>t.value.payToken=s),required:""},null,512),[[g,t.value.payToken]]),Me]),e("div",Le,[Re,T(e("input",{type:"number",class:"form-control",id:"payAmount","onUpdate:modelValue":a[3]||(a[3]=s=>t.value.payAmount=s),required:""},null,512),[[g,t.value.payAmount]]),Ne]),e("div",Be,[Ce,e("div",null,[e("div",Fe,[e("input",{class:"form-check-input",type:"radio",name:"isBid",id:"bidLimited",value:!1,checked:!n.value,onChange:a[4]||(a[4]=s=>_(!1))},null,40,De),Se]),e("div",Ue,[e("input",{class:"form-check-input",type:"radio",name:"isBid",id:"bidAuction",value:!0,checked:n.value,onChange:a[5]||(a[5]=s=>_(!0))},null,40,Ve),qe])])]),n.value?(o(),d("div",Ee,[e("label",Oe,"Bonus Rate: "+b(R.value)+" %",1),T(e("input",{type:"range",class:"form-range",min:"0",max:$.value,step:"1",id:"bonusRate","onUpdate:modelValue":a[6]||(a[6]=s=>t.value.bonusRate=s),onChange:h,required:n.value},null,40,Pe),[[g,t.value.bonusRate]])])):M("",!0),n.value?(o(),d("div",Ye,[je,T(e("input",{type:"number",class:"form-control",id:"endTime","onUpdate:modelValue":a[7]||(a[7]=s=>t.value.endTime=s),required:n.value},null,8,ze),[[g,t.value.endTime]]),He])):M("",!0),e("div",Ke,[T(e("input",{type:"checkbox",class:"form-check-input",id:"agreenTerms","onUpdate:modelValue":a[8]||(a[8]=s=>t.value.agreenTerms=s),required:""},null,512),[[K,t.value.agreenTerms]]),Qe]),We,e("button",{class:"w-100 btn btn-primary btn-lg",type:"button",disabled:r(u),onClick:k},[r(u)?(o(),d("span",Je)):M("",!0),L(" "+b(r(u)?"Loading...":"NFT List"),1)],8,Ge)],2)])])])])])])]))}}),Ze=V({__name:"list",props:{nftInfo:null},setup(v){const i=v.nftInfo;return(u,c)=>{const p=Xe,y=Q;return o(),A(y,null,{default:S(()=>[U(p,{nftInfo:r(i)},null,8,["nftInfo"])]),_:1})}}}),C=v=>(ne("data-v-6671ea8c"),v=v(),ae(),v),et={key:0,class:"py-5 container"},tt={class:"row py-lg-5"},nt={class:"col-lg-6 col-md-12"},at={class:"ratio ratio-1x1 nft-img"},st=["src"],ot={class:"col-lg-6 col-md-12"},it={class:"card border-0"},lt={class:"card-body"},dt={class:"card-text"},rt={key:0,class:"bi bi-patch-check-fill text-primary"},ut={class:"card-body"},ct={class:"card-title"},pt={class:"card-text"},yt=L(" Owned by "),mt={class:"d-flex justify-content-start align-items-center"},ft=["disabled"],vt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},_t=ee('<div class="d-flex justify-content-start align-items-center pt-5 pb-5" id="list-example" data-v-6671ea8c><a href="#history" data-v-6671ea8c>History <i class="bi bi-link-45deg" data-v-6671ea8c></i></a><a class="ms-3" href="#offers" data-v-6671ea8c>Offers <i class="bi bi-link-45deg" data-v-6671ea8c></i></a><a class="ms-3" href="#listings" data-v-6671ea8c>Listings <i class="bi bi-link-45deg" data-v-6671ea8c></i></a></div>',1),bt={class:"mb-5"},ht=C(()=>e("h4",null,"Properties",-1)),kt={class:"table table-bordered"},Tt=C(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Property"),e("th",{scope:"col"},"Value")])],-1)),gt={key:0},It={key:1},xt=C(()=>e("tr",{class:"text-center fw-lighter"},[e("td",{colspan:"5"},"No Data")],-1)),wt=[xt],$t={"data-bs-spy":"scroll","data-bs-target":"#list-example","data-bs-offset":"0","data-bs-smooth-scroll":"true",class:"scrollspy-example",tabindex:"0"},At={class:"mb-5",id:"listings"},Mt={class:"mb-5",id:"offers"},Lt={class:"mb-5",id:"history"},Rt={key:1,class:"py-5 container"},Nt=C(()=>e("div",{class:"row"},[e("div",{class:"text-center"},[e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")])])],-1)),Bt=[Nt],Ct=V({__name:"[token]-[tokenId]",setup(v){const w=G(),i=w.params.token,u=w.params.tokenId,c=Y(),p=j(),{$truncateAccount:y}=J(),{account:m,library:f,chainId:t}=z();O([m,p],()=>{m.value&&$()});const n=I();async function R(){const _=new f.value.eth.Contract(B,x[t.value]),h=await _.methods.nftIdMap(i,u).call(),k=await _.methods.nftById(h).call(),l=await _.methods.collectionMap(i).call(),{data:a}=await re(h,()=>$fetch(k.tokenURI),"$R5zKrApQQj"),s={...k,collection:l,metadata:a.value};n.value=s}function $(){!!f.value&&!!m.value&&!!t.value&&R()}function N(){!!i&&!!u&&(c.value=!0,new f.value.eth.Contract(B,x[t.value]).methods.listCancelled(i,u).send({from:m.value}).then(()=>{c.value=!1,p.value=Date.parse(new Date().toString())}).catch(h=>{console.info(h),c.value=!1}))}return P(()=>{$()}),(_,h)=>{var q,E;const k=te,l=Ze,a=ie,s=le,F=de;return o(),d("main",null,[(q=n.value)!=null&&q.token?(o(),d("section",et,[e("div",tt,[e("div",nt,[e("div",at,[e("img",{src:(E=n.value.metadata)==null?void 0:E.fileUrl},null,8,st)])]),e("div",ot,[e("div",it,[e("div",lt,[e("p",dt,[U(k,{to:`/account/nfts/${n.value.collection.token}`},{default:S(()=>[L(b(n.value.collection.name),1)]),_:1},8,["to"]),n.value.collection.approve?(o(),d("i",rt)):M("",!0)])]),e("div",ut,[e("h3",ct,b(n.value.metadata.name),1),e("p",pt,[yt,U(k,{to:`/account/${n.value.owner}`},{default:S(()=>[L(b(r(y)(n.value.owner)),1)]),_:1},8,["to"])]),e("div",mt,[(o(),A(l,{nftInfo:n.value,key:r(p)},null,8,["nftInfo"])),e("button",{class:"btn btn-danger ms-3",type:"button",disabled:!n.value.onSale||r(c),onClick:N},[r(c)?(o(),d("span",vt)):M("",!0),L(" "+b(r(c)?"Loading...":"List Cancelled"),1)],8,ft)])])])])]),_t,e("div",bt,[ht,e("table",kt,[Tt,n.value.metadata.properties.length>0?(o(),d("tbody",gt,[(o(!0),d(X,null,Z(n.value.metadata.properties,D=>(o(),d("tr",{key:D.property},[e("th",null,b(D.property),1),e("td",null,b(D.value),1)]))),128))])):(o(),d("tbody",It,wt))])]),e("div",$t,[e("div",At,[(o(),A(a,{nftInfo:n.value,key:r(p)},null,8,["nftInfo"]))]),e("div",Mt,[(o(),A(s,{nftInfo:n.value,key:r(p)},null,8,["nftInfo"]))]),e("div",Lt,[(o(),A(F,{nftInfo:n.value,key:r(p)},null,8,["nftInfo"]))])])])):(o(),d("section",Rt,Bt))])}}});var Et=W(Ct,[["__scopeId","data-v-6671ea8c"]]);export{Et as default};
