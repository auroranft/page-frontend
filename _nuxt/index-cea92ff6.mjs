import{u as Ne}from"./useWeb3-8a74333c.mjs";import{d as he,w as Re,r as F,e as Te,o as T,c as A,a as d,n as Ae,i as y,s as D,v as J,t as Z,K as ee,h as Y,g as fe,T as $e,V as ra,W as sa,X as m,Y as na,Z as oa,$ as ca,a0 as c,a1 as l,a2 as I,a3 as w,a4 as ia,a5 as $,a6 as te,a7 as Ie,a8 as la,a9 as da,aa as ua,ab as je,ac as ha,ad as Be,ae as fa,af as pe,ag as ma,ah as ya,ai as pa,aj as ga,ak as wa,al as ba,am as va,u as _a,P as O,y as Pa,F as ge,f as we,j as V,k as Ue,x as Ea,M as ke}from"./entry-edde8571.mjs";import{u as xe}from"./useLoading-6c61759c.mjs";import{a as De,u as Le,A as ae}from"./AuroranMarket-3591bb2e.mjs";import{a as z,b as Ca,i as be,c as Sa,d as Na}from"./index-745e66ed.mjs";import{_ as Ra}from"./ConnectBtn-fce0b26c.mjs";import{A as Ta}from"./AuroranNFTQuery-e3f22263.mjs";import{T as ve}from"./TokenERC20_abi-e6f25529.mjs";const Aa={name:null,symbol:null,royalty:0,verifyRights:!1,agreenTerms:!1},$a={style:{display:"inline-block"}},Ia=d("button",{type:"button",class:"btn btn-outline-primary",style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"},"data-bs-toggle":"modal","data-bs-target":"#modalAddCollection"},[d("i",{class:"bi bi-plus"})],-1),ja={class:"modal fade",id:"modalAddCollection",tabindex:"-1","aria-labelledby":"modalAddCollectionLabel","aria-hidden":"true"},Ba={class:"modal-dialog modal-lg modal-dialog-centered"},Ua={class:"modal-content"},ka=d("div",{class:"modal-header"},[d("h5",{class:"modal-title",id:"modalAddCollectionLabel"},"Create New Collection"),d("button",{id:"closeModalAddCollection",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),xa={class:"modal-body"},Da={class:"row g-5"},La={class:"col"},Fa=d("p",{class:"fw-lighter"},"When creating a new collection, you are deploying your own contract to the blockchain! NFTrade charges zero platform transaction fees, so you only need to pay for the network gas fees. This is a collection under your own unique contract, meaning you are the owner of the contract and you'll be able to add as many NFTs to that collection as you'd like. Your minted tokens will receive incremental IDs starting from 1, increasing with each new NFT in the collection.",-1),Oa=d("p",{class:"fw-lighter"},"Since this is a unique contract address, you will have the opportunity to verify your collection later on.",-1),Ma={class:"my-4"},Ha=d("label",{for:"name",class:"form-label"},"Name",-1),qa=d("p",{class:"fw-lighter"},"Crypto Punks / Meebits / etc..",-1),Va=d("div",{class:"invalid-feedback"}," You must choose a name ",-1),za={class:"my-4"},Ka=d("label",{for:"symbol",class:"form-label"},"Symbol",-1),Xa=d("p",{class:"fw-lighter"},"CPNKS / MBTS / etc..",-1),Ga=d("div",{class:"invalid-feedback"}," You must choose a symbol ",-1),Wa={class:"my-4"},Qa={for:"royaltyRate",class:"form-label"},Ya=["max","value"],Ja=d("div",{class:"my-4"},null,-1),Za={class:"form-check"},et=d("label",{class:"form-check-label fw-lighter",for:"verifyRights"},"I verify I am minting a unique collection and that this is not a reproduction, stolen intellectual property, or a scam.",-1),at={class:"form-check"},tt=d("label",{class:"form-check-label fw-lighter",for:"agreenTerms"},"I approve NFTrade's Terms & Conditions",-1),rt=d("hr",{class:"my-4"},null,-1),st=["disabled"],nt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},ot=he({__name:"addCollection",setup(e){const{account:t,library:a,chainId:r}=Ne();Re([t,a,r],()=>{!!t.value&&!!a.value&&!!r.value&&b()});const s=xe(),n=De(),o=Le(),i=Aa;function u(){n.value=!0,s.value=!0,i.royalty=h.value,i.name&&i.symbol&&i.verifyRights&&i.agreenTerms?new a.value.eth.Contract(ae,z[r.value]).methods.addCollection(i.name,i.symbol,i.royalty).send({from:t.value}).on("error",function(){s.value=!1,document.getElementById("closeModalAddCollection").click()}).then(()=>{o.value=Date.parse(new Date().toString()),s.value=!1,document.getElementById("closeModalAddCollection").click()}):s.value=!1}const h=F(0),f=F(0);async function b(){const p=new a.value.eth.Contract(ae,z[r.value]);f.value=await p.methods.maxRoyaltyRate().call({from:t.value})}function S(p){h.value=p.target.value}return Te(()=>{b()}),(p,v)=>(T(),A("div",$a,[Ia,d("div",ja,[d("div",Ba,[d("div",Ua,[ka,d("div",xa,[d("div",Da,[d("div",La,[Fa,Oa,d("form",{class:Ae(`needs-validation ${y(n)?"was-validated":""}`),novalidate:""},[d("div",Ma,[Ha,qa,D(d("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter the collection's name","onUpdate:modelValue":v[0]||(v[0]=E=>y(i).name=E),required:""},null,512),[[J,y(i).name]]),Va]),d("div",za,[Ka,Xa,D(d("input",{type:"text",class:"form-control",id:"symbol",placeholder:"Enter the collection's symbol","onUpdate:modelValue":v[1]||(v[1]=E=>y(i).symbol=E),required:""},null,512),[[J,y(i).symbol]]),Ga]),d("div",Wa,[d("label",Qa,"RoyaltyRate: "+Z(h.value)+" %",1),d("input",{type:"range",class:"form-range",min:"0",max:f.value,step:"1",id:"royaltyRate",value:h.value,onChange:S,required:""},null,40,Ya)]),Ja,d("div",Za,[D(d("input",{type:"checkbox",class:"form-check-input",id:"verifyRights","onUpdate:modelValue":v[2]||(v[2]=E=>y(i).verifyRights=E),required:""},null,512),[[ee,y(i).verifyRights]]),et]),d("div",at,[D(d("input",{type:"checkbox",class:"form-check-input",id:"agreenTerms","onUpdate:modelValue":v[3]||(v[3]=E=>y(i).agreenTerms=E),required:""},null,512),[[ee,y(i).agreenTerms]]),tt]),rt,d("button",{class:"w-100 btn btn-primary btn-lg",type:"button",disabled:y(s),onClick:u},[y(s)?(T(),A("span",nt)):Y("",!0),fe(" "+Z(y(s)?"Loading...":"Create Collection"),1)],8,st)],2)])])])])])])]))}}),ct=e=>Promise.reject(new Error(`No base found for "${e}"`));class it{constructor(t){this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase||ct;for(const a of t.bases)this.addBase(a)}addBase(t){if(this._basesByName[t.name]||this._basesByPrefix[t.prefix])throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t])return this._basesByName[t];if(this._basesByPrefix[t])return this._basesByPrefix[t];const a=await this._loadBase(t);return this._basesByName[a.name]==null&&this._basesByPrefix[a.prefix]==null&&this.addBase(a),a}listBases(){return Object.values(this._basesByName)}}const lt=e=>Promise.reject(new Error(`No codec found for "${e}"`));class dt{constructor(t){this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec||lt;for(const a of t.codecs)this.addCodec(a)}addCodec(t){if(this._codecsByName[t.name]||this._codecsByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){const a=typeof t=="string"?this._codecsByName:this._codecsByCode;if(a[t])return a[t];const r=await this._loadCodec(t);return a[t]==null&&this.addCodec(r),r}listCodecs(){return Object.values(this._codecsByName)}}const ut=e=>Promise.reject(new Error(`No hasher found for "${e}"`));class ht{constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher||ut;for(const a of t.hashers)this.addHasher(a)}addHasher(t){if(this._hashersByName[t.name]||this._hashersByCode[t.code])throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){const a=typeof t=="string"?this._hashersByName:this._hashersByCode;if(a[t])return a[t];const r=await this._loadHasher(t);return a[t]==null&&this.addHasher(r),r}listHashers(){return Object.values(this._hashersByName)}}const ft="dag-pb",mt=112;function yt(e){$e(e);const t={};return e.Links&&(t.Links=e.Links.map(a=>{const r={};return a.Hash&&(r.Hash=a.Hash.bytes),a.Name!==void 0&&(r.Name=a.Name),a.Tsize!==void 0&&(r.Tsize=a.Tsize),r})),e.Data&&(t.Data=e.Data),ra(t)}function pt(e){const t=sa(e),a={};return t.Data&&(a.Data=t.Data),t.Links&&(a.Links=t.Links.map(r=>{const s={};try{s.Hash=m.decode(r.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return r.Name!==void 0&&(s.Name=r.Name),r.Tsize!==void 0&&(s.Tsize=r.Tsize),s})),a}var gt=Object.freeze(Object.defineProperty({__proto__:null,name:ft,code:mt,encode:yt,decode:pt,prepare:na,validate:$e,createNode:oa,createLink:ca},Symbol.toStringTag,{value:"Module"}));const wt=c(e=>{async function t(a={}){return((await(await e.post("bitswap/wantlist",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()).Keys||[]).map(s=>m.parse(s["/"]))}return t}),bt=c(e=>{async function t(a,r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:l({...r,peer:a.toString()}),headers:r.headers})).json()).Keys||[]).map(n=>m.parse(n["/"]))}return t}),Fe=c(e=>{async function t(a={}){const r=await e.post("bitswap/stat",{searchParams:l(a),signal:a.signal,headers:a.headers});return vt(await r.json())}return t});function vt(e){return{provideBufLen:e.ProvideBufLen,wantlist:(e.Wantlist||[]).map(t=>m.parse(t["/"])),peers:(e.Peers||[]).map(t=>I(t)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}const _t=c(e=>{async function t(a,r={}){return(await e.post("bitswap/unwant",{signal:r.signal,searchParams:l({arg:a.toString(),...r}),headers:r.headers})).json()}return t});function Pt(e){return{wantlist:wt(e),wantlistForPeer:bt(e),unwant:_t(e),stat:Fe(e)}}const Oe=c(e=>{async function t(a,r={}){const s=await e.post("block/get",{signal:r.signal,searchParams:l({arg:a.toString(),...r}),headers:r.headers});return new Uint8Array(await s.arrayBuffer())}return t});function Et(e){const[t,a]=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],r=[];return{peek:()=>t.next(),push:s=>{r.push(s)},next:()=>r.length?{done:!1,value:r.shift()}:t.next(),[a](){return this}}}var re=Et;async function*Ct(e,t={}){const a=e.getReader();try{for(;;){const r=await a.read();if(r.done)return;yield r.value}}finally{t.preventCancel!==!0&&a.cancel(),a.releaseLock()}}var G=Ct;const St=async e=>{const t=[];for await(const a of e)t.push(a);return t};var Me=St;function L(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function K(e){return e.constructor&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function le(e){return typeof e=="object"&&(e.path||e.content)}const X=e=>e&&typeof e.getReader=="function";async function Nt(e){if(L(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(K(e))return e;if(X(e)&&(e=G(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=re(e),{value:a,done:r}=await t.peek();if(r)return _e(t);if(t.push(a),Number.isInteger(a))return new Blob([Uint8Array.from(await Me(t))]);if(L(a)||typeof a=="string"||a instanceof String)return _e(t)}throw w(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function _e(e){const t=[];for await(const a of e)t.push(a);return new Blob(t)}const Rt=async function*(e,t){for await(const a of e)yield t(a)};var de=Rt;function He(e){if(e!=null)return typeof e=="number"?e&4095:(e=e.toString(),e.substring(0,1)==="0"?parseInt(e,8)&4095:parseInt(e,10)&4095)}function qe(e){if(e==null)return;let t;if(e.secs!=null&&(t={secs:e.secs,nsecs:e.nsecs}),e.Seconds!=null&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){const a=e.getTime(),r=Math.floor(a/1e3);t={secs:r,nsecs:(a-r*1e3)*1e3}}if(!!Object.prototype.hasOwnProperty.call(t,"secs")){if(t!=null&&t.nsecs!=null&&(t.nsecs<0||t.nsecs>999999999))throw w(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}async function*Tt(e,t){if(typeof e=="string"||e instanceof String||L(e)||K(e)||e._readableState)throw w(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(X(e)&&(e=G(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const a=re(e),{value:r,done:s}=await a.peek();if(s){yield*[];return}if(a.push(r),Number.isInteger(r))throw w(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(r._readableState){yield*de(a,n=>ce({content:n},t));return}if(L(r)){yield ce({content:a},t);return}if(le(r)||r[Symbol.iterator]||r[Symbol.asyncIterator]||X(r)||K(r)){yield*de(a,n=>ce(n,t));return}}throw le(e)?w(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):w(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function ce(e,t){const{path:a,mode:r,mtime:s,content:n}=e,o={path:a||"",mode:He(r),mtime:qe(s)};return n?o.content=await t(n):a||(o.content=await t(e)),o}function At(e){return Tt(e,Nt)}function $t(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function U(e,t,a={}){const r=[],s=new FormData;let n=0,o=0;for await(const{content:i,path:u,mode:h,mtime:f}of At(e)){let b="";const S=i?"file":"dir";n>0&&(b=`-${n}`);let p=S+b;const v=[];if(h!=null&&v.push(`mode=${$t(h)}`),f!=null){const{secs:E,nsecs:x}=f;v.push(`mtime=${E}`),x!=null&&v.push(`mtime-nsecs=${x}`)}if(v.length&&(p=`${p}?${v.join("&")}`),i){s.set(p,i,u!=null?encodeURIComponent(u):void 0);const E=o+i.size;r.push({name:u,start:o,end:E}),o=E}else if(u!=null)s.set(p,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");n++}return{total:o,parts:r,headers:a,body:s}}function It(e){return e.filter(Boolean)}function k(...e){return ia(It(e))}const jt=c(e=>{async function t(a,r={}){const s=new AbortController,n=k(s.signal,r.signal);let o;try{o=await(await e.post("block/put",{signal:n,searchParams:l(r),...await U([a],s,r.headers)})).json()}catch(i){if(r.format==="dag-pb")return t(a,{...r,format:"protobuf"});if(r.format==="dag-cbor")return t(a,{...r,format:"cbor"});throw i}return m.parse(o.Key)}return t}),Bt=c(e=>{async function*t(a,r={}){Array.isArray(a)||(a=[a]);const s=await e.post("block/rm",{signal:r.signal,searchParams:l({arg:a.map(n=>n.toString()),"stream-channels":!0,...r}),headers:r.headers});for await(const n of s.ndjson())yield Ut(n)}return t});function Ut(e){const t={cid:m.parse(e.Hash)};return e.Error&&(t.error=new Error(e.Error)),t}const kt=c(e=>{async function t(a,r={}){const n=await(await e.post("block/stat",{signal:r.signal,searchParams:l({arg:a.toString(),...r}),headers:r.headers})).json();return{cid:m.parse(n.Key),size:n.Size}}return t});function xt(e){return{get:Oe(e),put:jt(e),rm:Bt(e),stat:kt(e)}}const Dt=c(e=>{async function t(a,r={}){const s=await e.post("bootstrap/add",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers}),{Peers:n}=await s.json();return{Peers:n.map(o=>new $(o))}}return t}),Lt=c(e=>{async function t(a={}){const r=await e.post("bootstrap/rm",{signal:a.signal,searchParams:l({...a,all:!0}),headers:a.headers}),{Peers:s}=await r.json();return{Peers:s.map(n=>new $(n))}}return t}),Ft=c(e=>{async function t(a={}){const r=await e.post("bootstrap/list",{signal:a.signal,searchParams:l(a),headers:a.headers}),{Peers:s}=await r.json();return{Peers:s.map(n=>new $(n))}}return t}),Ot=c(e=>{async function t(a={}){const r=await e.post("bootstrap/add",{signal:a.signal,searchParams:l({...a,default:!0}),headers:a.headers}),{Peers:s}=await r.json();return{Peers:s.map(n=>new $(n))}}return t}),Mt=c(e=>{async function t(a,r={}){const s=await e.post("bootstrap/rm",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers}),{Peers:n}=await s.json();return{Peers:n.map(o=>new $(o))}}return t});function Ht(e){return{add:Dt(e),clear:Lt(e),list:Ft(e),reset:Ot(e),rm:Mt(e)}}const qt=c(e=>{async function t(a,r={}){const n=await(await e.post("config/profile/apply",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).json();return{original:n.OldCfg,updated:n.NewCfg}}return t});function P(e){if(e==null)return e;const t=/^[A-Z]+$/,a={};return Object.keys(e).reduce((r,s)=>(t.test(s)?r[s.toLowerCase()]=e[s]:t.test(s[0])?r[s[0].toLowerCase()+s.slice(1)]=e[s]:r[s]=e[s],r),a)}const Vt=c(e=>{async function t(a={}){return(await(await e.post("config/profile/list",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()).map(n=>P(n))}return t});function zt(e){return{apply:qt(e),list:Vt(e)}}const Kt=c(e=>async(a,r={})=>{if(!a)throw new Error("key argument is required");return(await(await e.post("config",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).json()).Value}),Xt=c(e=>async(a={})=>await(await e.post("config/show",{signal:a.signal,searchParams:l({...a}),headers:a.headers})).json()),Gt=c(e=>async(a,r={})=>{const s=new AbortController,n=k(s.signal,r.signal);await(await e.post("config/replace",{signal:n,searchParams:l(r),...await U([te(JSON.stringify(a))],s,r.headers)})).text()}),Wt=c(e=>async(a,r,s={})=>{if(typeof a!="string")throw new Error("Invalid key type");const n={...s,...Qt(a,r)};await(await e.post("config",{signal:s.signal,searchParams:l(n),headers:s.headers})).text()}),Qt=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}};function Yt(e){return{getAll:Xt(e),get:Kt(e),set:Wt(e),replace:Gt(e),profiles:zt(e)}}const Jt=c(e=>{async function*t(a,r={}){yield*(await e.post("dag/export",{signal:r.signal,searchParams:l({arg:a.toString()}),headers:r.headers})).iterator()}return t});async function*Pe(e,t,a,r,s){const n=async h=>{const f=await a.getCodec(h.code),b=await r(h,s);return f.decode(b)},o=t.split("/").filter(Boolean);let i=await n(e),u=e;for(;o.length;){const h=o.shift();if(!h)throw w(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(i,h))i=i[h],yield{value:i,remainderPath:o.join("/")};else throw w(new Error(`no link named "${h}" under ${u}`),"ERR_NO_LINK");const f=m.asCID(i);f&&(u=f,i=await n(i))}yield{value:i,remainderPath:""}}const Zt=async e=>{for await(const t of e)return t};var er=Zt;const ar=async e=>{let t;for await(const a of e)t=a;return t};var se=ar;const tr=(e,t)=>c((r,s)=>{const n=Oe(s);return async(i,u={})=>{if(u.path){const p=u.localResolve?await er(Pe(i,u.path,e,n,u)):await se(Pe(i,u.path,e,n,u));if(!p)throw w(new Error("Not found"),"ERR_NOT_FOUND");return p}const h=await e.getCodec(i.code),f=await n(i,u);return{value:h.decode(f),remainderPath:""}}})(t),rr=c(e=>{async function*t(a,r={}){const s=new AbortController,n=k(s.signal,r.signal),{headers:o,body:i}=await U(a,s,r.headers),u=await e.post("dag/import",{signal:n,headers:o,body:i,searchParams:l({"pin-roots":r.pinRoots})});for await(const{Root:h}of u.ndjson())if(h!==void 0){const{Cid:{"/":f},PinErrorMsg:b}=h;yield{root:{cid:m.parse(f),pinErrorMsg:b}}}}return t}),Ve=(e,t)=>c(r=>async(n,o={})=>{const i={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o};let u;if(i.inputCodec){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");u=n}else u=(await e.getCodec(i.storeCodec)).encode(n),i.inputCodec=i.storeCodec;const h=new AbortController,f=k(h.signal,i.signal),S=await(await r.post("dag/put",{timeout:i.timeout,signal:f,searchParams:l(i),...await U([u],h,i.headers)})).json();return m.parse(S.Cid["/"])})(t),sr=c(e=>async(a,r={})=>{const n=await(await e.post("dag/resolve",{signal:r.signal,searchParams:l({arg:`${a}${r.path?`/${r.path}`.replace(/\/[/]+/g,"/"):""}`,...r}),headers:r.headers})).json();return{cid:m.parse(n.Cid["/"]),remainderPath:n.RemPath}});function nr(e,t){return{export:Jt(t),get:tr(e,t),import:rr(t),put:Ve(e,t),resolve:sr(t)}}const or=0,cr=1,ir=2,lr=3,dr=4,ur=5,hr=6,fr=7,M=e=>{var t;if(e.Type===or)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===cr)return{from:I(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map(({ID:a,Addrs:r})=>({id:I(a),multiaddrs:r.map(s=>new $(s)),protocols:[]})),providers:(e.Responses||[]).map(({ID:a,Addrs:r})=>({id:I(a),multiaddrs:r.map(s=>new $(s)),protocols:[]}))};if(e.Type===ir){let a={id:(t=e.ID)!=null?t:I(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(a={id:I(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(r=>new $(r)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:a}}if(e.Type===lr)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===dr)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:a,Addrs:r})=>({id:I(a),multiaddrs:r.map(s=>new $(s)),protocols:[]}))};if(e.Type===ur)return{name:"VALUE",type:e.Type,value:te(e.Extra,"base64pad")};if(e.Type===hr){const a=e.Responses.map(({ID:r})=>I(r));if(!a.length)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:a[0]}}if(e.Type===fr)return{name:"DIALING_PEER",type:e.Type,peer:I(e.ID)};throw new Error("Unknown DHT event type")},mr=c(e=>{async function*t(a,r={}){const s=await e.post("dht/findpeer",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers});for await(const n of s.ndjson())yield M(n)}return t}),yr=c(e=>{async function*t(a,r={}){const s=await e.post("dht/findprovs",{signal:r.signal,searchParams:l({arg:a.toString(),...r}),headers:r.headers});for await(const n of s.ndjson())yield M(n)}return t}),pr=c(e=>{async function*t(a,r={}){const s=await e.post("dht/get",{signal:r.signal,searchParams:l({arg:a instanceof Uint8Array?Ie(a):a.toString(),...r}),headers:r.headers});for await(const n of s.ndjson())yield M(n)}return t}),gr=c(e=>{async function*t(a,r={recursive:!1}){const s=Array.isArray(a)?a:[a],n=await e.post("dht/provide",{signal:r.signal,searchParams:l({arg:s.map(o=>o.toString()),...r}),headers:r.headers});for await(const o of n.ndjson())yield M(o)}return t}),wr=c(e=>{async function*t(a,r,s={}){const n=new AbortController,o=k(n.signal,s.signal),i=await e.post("dht/put",{signal:o,searchParams:l({arg:a instanceof Uint8Array?Ie(a):a.toString(),...s}),...await U([r],n,s.headers)});for await(const u of i.ndjson())yield M(u)}return t}),br=c(e=>{async function*t(a,r={}){const s=await e.post("dht/query",{signal:r.signal,searchParams:l({arg:a.toString(),...r}),headers:r.headers});for await(const n of s.ndjson())yield M(n)}return t});function vr(e){return{findPeer:mr(e),findProvs:yr(e),get:pr(e),provide:gr(e),put:wr(e),query:br(e)}}const _r=c(e=>{async function t(a={}){return(await e.post("diag/cmds",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()}return t}),Pr=c(e=>{async function t(a={}){return(await e.post("diag/net",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()}return t}),Er=c(e=>{async function t(a={}){return(await e.post("diag/sys",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()}return t});function Cr(e){return{cmds:_r(e),net:Pr(e),sys:Er(e)}}const Sr=c(e=>{async function t(a,r,s={}){await(await e.post("files/chmod",{signal:s.signal,searchParams:l({arg:a,mode:r,...s}),headers:s.headers})).text()}return t}),Nr=c(e=>{async function t(a,r,s={}){const n=Array.isArray(a)?a:[a];await(await e.post("files/cp",{signal:s.signal,searchParams:l({arg:n.concat(r).map(i=>m.asCID(i)?`/ipfs/${i}`:i),...s}),headers:s.headers})).text()}return t}),Rr=c(e=>{async function t(a,r={}){if(!a||typeof a!="string")throw new Error("ipfs.files.flush requires a path");const n=await(await e.post("files/flush",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).json();return m.parse(n.Cid)}return t});function ue(e){const t=P(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}const Tr=c(e=>{async function*t(a,r={}){if(!a)throw new Error("ipfs.files.ls requires a path");const s=await e.post("files/ls",{signal:r.signal,searchParams:l({arg:m.asCID(a)?`/ipfs/${a}`:a,long:!0,...r,stream:!0}),headers:r.headers});for await(const n of s.ndjson())if("Entries"in n)for(const o of n.Entries||[])yield Ee(ue(o));else yield Ee(ue(n))}return t});function Ee(e){return e.hash&&(e.cid=m.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}const Ar=c(e=>{async function t(a,r={}){await(await e.post("files/mkdir",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).text()}return t}),$r=c(e=>{async function t(a,r,s={}){Array.isArray(a)||(a=[a]),await(await e.post("files/mv",{signal:s.signal,searchParams:l({arg:a.concat(r),...s}),headers:s.headers})).text()}return t});var Ir=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){const t=e.getReader();try{for(;;){const{done:a,value:r}=await t.read();if(a)return;yield r}}finally{t.releaseLock()}}();throw new Error("unknown stream")};const jr=c(e=>{async function*t(a,r={}){const s=await e.post("files/read",{signal:r.signal,searchParams:l({arg:a,count:r.length,...r}),headers:r.headers});yield*Ir(s.body)}return t}),Br=c(e=>{async function t(a,r={}){const s=await e.post("files/rm",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers}),n=await s.text();if(n!==""){const o=new la.HTTPError(s);throw o.message=n,o}}return t}),ze=c(e=>{async function t(a,r={}){const n=await(await e.post("files/stat",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).json();return n.WithLocality=n.WithLocality||!1,Ur(ue(n))}return t});function Ur(e){return e.cid=m.parse(e.hash),delete e.hash,e}const kr=c(e=>{async function t(a,r={}){await(await e.post("files/touch",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).text()}return t}),xr=c(e=>{async function t(a,r,s={}){const n=new AbortController,o=k(n.signal,s.signal);await(await e.post("files/write",{signal:o,searchParams:l({arg:a,streamChannels:!0,count:s.length,...s}),...await U([{content:r,path:"arg",mode:da(s.mode),mtime:ua(s.mtime)}],n,s.headers)})).text()}return t});function Dr(e){return{chmod:Sr(e),cp:Nr(e),flush:Rr(e),ls:Tr(e),mkdir:Ar(e),mv:$r(e),read:jr(e),rm:Br(e),stat:ze(e),touch:kr(e),write:xr(e)}}const Lr=c(e=>async(a,r,s={})=>{throw w(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),Fr=c(e=>{async function t(a,r={type:"Ed25519"}){const n=await(await e.post("key/gen",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).json();return P(n)}return t}),Or=c(e=>{async function t(a,r,s,n={}){const i=await(await e.post("key/import",{signal:n.signal,searchParams:l({arg:a,pem:r,password:s,...n}),headers:n.headers})).json();return P(i)}return t}),Mr=c(e=>async(a,r={})=>{throw w(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),Hr=c(e=>{async function t(a={}){return((await(await e.post("key/list",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()).Keys||[]).map(n=>P(n))}return t}),qr=c(e=>{async function t(a,r,s={}){const n=await e.post("key/rename",{signal:s.signal,searchParams:l({arg:[a,r],...s}),headers:s.headers});return P(await n.json())}return t}),Vr=c(e=>{async function t(a,r={}){const n=await(await e.post("key/rm",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).json();return P(n.Keys[0])}return t});function zr(e){return{export:Lr(e),gen:Fr(e),import:Or(e),info:Mr(e),list:Hr(e),rename:qr(e),rm:Vr(e)}}const Kr=c(e=>{async function t(a,r,s={}){const n=await e.post("log/level",{signal:s.signal,searchParams:l({arg:[a,r],...s}),headers:s.headers});return P(await n.json())}return t}),Xr=c(e=>{async function t(a={}){return(await(await e.post("log/ls",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()).Strings}return t}),Gr=c(e=>{async function*t(a={}){yield*(await e.post("log/tail",{signal:a.signal,searchParams:l(a),headers:a.headers})).ndjson()}return t});function Wr(e){return{level:Kr(e),ls:Xr(e),tail:Gr(e)}}const Qr=c(e=>{async function t(a,r={}){const s=await e.post("name/publish",{signal:r.signal,searchParams:l({arg:`${a}`,...r}),headers:r.headers});return P(await s.json())}return t}),Yr=c(e=>{async function*t(a,r={}){const s=await e.post("name/resolve",{signal:r.signal,searchParams:l({arg:a,stream:!0,...r}),headers:r.headers});for await(const n of s.ndjson())yield n.Path}return t}),Jr=c(e=>{async function t(a,r={}){const s=await e.post("name/pubsub/cancel",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers});return P(await s.json())}return t}),Zr=c(e=>{async function t(a={}){const r=await e.post("name/pubsub/state",{signal:a.signal,searchParams:l(a),headers:a.headers});return P(await r.json())}return t}),es=c(e=>{async function t(a={}){return(await(await e.post("name/pubsub/subs",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()).Strings||[]}return t});function as(e){return{cancel:Jr(e),state:Zr(e),subs:es(e)}}function ts(e){return{publish:Qr(e),resolve:Yr(e),pubsub:as(e)}}const rs=c(e=>{async function t(a,r={}){const n=await(await e.post("object/data",{signal:r.signal,searchParams:l({arg:`${a instanceof Uint8Array?m.decode(a):a}`,...r}),headers:r.headers})).arrayBuffer();return new Uint8Array(n,0,n.byteLength)}return t}),ss=c(e=>{async function t(a,r={}){const n=await(await e.post("object/get",{signal:r.signal,searchParams:l({arg:`${a instanceof Uint8Array?m.decode(a):a}`,dataEncoding:"base64",...r}),headers:r.headers})).json();return{Data:te(n.Data,"base64pad"),Links:(n.Links||[]).map(o=>({Name:o.Name,Hash:m.parse(o.Hash),Tsize:o.Size}))}}return t}),ns=c(e=>{async function t(a,r={}){return((await(await e.post("object/links",{signal:r.signal,searchParams:l({arg:`${a instanceof Uint8Array?m.decode(a):a}`,...r}),headers:r.headers})).json()).Links||[]).map(o=>({Name:o.Name,Tsize:o.Size,Hash:m.parse(o.Hash)}))}return t}),os=c(e=>{async function t(a={}){const r=await e.post("object/new",{signal:a.signal,searchParams:l({arg:a.template,...a}),headers:a.headers}),{Hash:s}=await r.json();return m.parse(s)}return t}),cs=(e,t)=>c(r=>{const s=Ve(e,t);async function n(o,i={}){return s(o,{...i,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}return n})(t),is=c(e=>{async function t(a,r={}){const n=await(await e.post("object/stat",{signal:r.signal,searchParams:l({arg:`${a}`,...r}),headers:r.headers})).json();return{...n,Hash:m.parse(n.Hash)}}return t}),ls=c(e=>{async function t(a,r,s={}){const n=await e.post("object/patch/add-link",{signal:s.signal,searchParams:l({arg:[`${a}`,r.Name||r.name||"",(r.Hash||r.cid||"").toString()||null],...s}),headers:s.headers}),{Hash:o}=await n.json();return m.parse(o)}return t}),ds=c(e=>{async function t(a,r,s={}){const n=new AbortController,o=k(n.signal,s.signal),i=await e.post("object/patch/append-data",{signal:o,searchParams:l({arg:`${a}`,...s}),...await U([r],n,s.headers)}),{Hash:u}=await i.json();return m.parse(u)}return t}),us=c(e=>{async function t(a,r,s={}){const n=await e.post("object/patch/rm-link",{signal:s.signal,searchParams:l({arg:[`${a}`,r.Name||r.name||null],...s}),headers:s.headers}),{Hash:o}=await n.json();return m.parse(o)}return t}),hs=c(e=>{async function t(a,r,s={}){const n=new AbortController,o=k(n.signal,s.signal),i=await e.post("object/patch/set-data",{signal:o,searchParams:l({arg:[`${a}`],...s}),...await U([r],n,s.headers)}),{Hash:u}=await i.json();return m.parse(u)}return t});function fs(e){return{addLink:ls(e),appendData:ds(e),rmLink:us(e),setData:hs(e)}}function ms(e,t){return{data:rs(t),get:ss(t),links:ns(t),new:os(t),put:cs(e,t),stat:is(t),patch:fs(t)}}async function*Ke(e){if(e==null)throw w(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");const t=m.asCID(e);if(t){yield B({cid:t});return}if(e instanceof String||typeof e=="string"){yield B({path:e});return}if(e.cid!=null||e.path!=null)return yield B(e);if(Symbol.iterator in e){const a=e[Symbol.iterator](),r=a.next();if(r.done)return a;if(m.asCID(r.value)||r.value instanceof String||typeof r.value=="string"){yield B({cid:r.value});for(const s of a)yield B({cid:s});return}if(r.value.cid!=null||r.value.path!=null){yield B(r.value);for(const s of a)yield B(s);return}throw w(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in e){const a=e[Symbol.asyncIterator](),r=await a.next();if(r.done)return a;if(m.asCID(r.value)||r.value instanceof String||typeof r.value=="string"){yield B({cid:r.value});for await(const s of a)yield B({cid:s});return}if(r.value.cid!=null||r.value.path!=null){yield B(r.value);for await(const s of a)yield B(s);return}throw w(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}throw w(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}function B(e){const t=e.cid||`${e.path}`;if(!t)throw w(new Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");const a={path:t,recursive:e.recursive!==!1};return e.metadata!=null&&(a.metadata=e.metadata),a}const Xe=c(e=>{async function*t(a,r={}){for await(const{path:s,recursive:n,metadata:o}of Ke(a)){const i=await e.post("pin/add",{signal:r.signal,searchParams:l({...r,arg:s,recursive:n,metadata:o?JSON.stringify(o):void 0,stream:!0}),headers:r.headers});for await(const u of i.ndjson()){if(u.Pins){for(const h of u.Pins)yield m.parse(h);continue}yield m.parse(u)}}}return t});function ys(e){const t=Xe(e);return c(()=>{async function a(r,s={}){return se(t([{path:r,...s}],s))}return a})(e)}function Ce(e,t,a){const r={type:e,cid:m.parse(t)};return a&&(r.metadata=a),r}const ps=c(e=>{async function*t(a={}){let r=[];a.paths&&(r=Array.isArray(a.paths)?a.paths:[a.paths]);const s=await e.post("pin/ls",{signal:a.signal,searchParams:l({...a,arg:r.map(n=>`${n}`),stream:!0}),headers:a.headers});for await(const n of s.ndjson()){if(n.Keys){for(const o of Object.keys(n.Keys))yield Ce(n.Keys[o].Type,o,n.Keys[o].Metadata);return}yield Ce(n.Type,n.Cid,n.Metadata)}}return t}),Ge=c(e=>{async function*t(a,r={}){for await(const{path:s,recursive:n}of Ke(a)){const o=new URLSearchParams(r.searchParams);o.append("arg",`${s}`),n!=null&&o.set("recursive",String(n));const i=await e.post("pin/rm",{signal:r.signal,headers:r.headers,searchParams:l({...r,arg:`${s}`,recursive:n})});for await(const u of i.ndjson()){if(u.Pins){yield*u.Pins.map(h=>m.parse(h));continue}yield m.parse(u)}}}return t}),gs=e=>{const t=Ge(e);return c(()=>{async function a(r,s={}){return se(t([{path:r,...s}],s))}return a})(e)},We=({Name:e,Status:t,Cid:a})=>({cid:m.parse(a),name:e,status:t}),Qe=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},Ye=e=>{if(m.asCID(e))return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},me=({service:e,cid:t,name:a,status:r,all:s})=>{const n=l({service:Qe(e),name:a,force:s?!0:void 0});if(t)for(const o of t)n.append("cid",Ye(o));if(r)for(const o of r)n.append("status",o);return n},ws=({cid:e,service:t,background:a,name:r,origins:s})=>{const n=l({arg:Ye(e),service:Qe(t),name:r,background:a?!0:void 0});if(s)for(const o of s)n.append("origin",o.toString());return n};function bs(e){async function t(a,{timeout:r,signal:s,headers:n,...o}){const i=await e.post("pin/remote/add",{timeout:r,signal:s,headers:n,searchParams:ws({cid:a,...o})});return We(await i.json())}return t}function vs(e){async function*t({timeout:a,signal:r,headers:s,...n}){const o=await e.post("pin/remote/ls",{timeout:a,signal:r,headers:s,searchParams:me(n)});for await(const i of o.ndjson())yield We(i)}return t}function _s(e){async function t({timeout:a,signal:r,headers:s,...n}){await e.post("pin/remote/rm",{timeout:a,signal:r,headers:s,searchParams:me({...n,all:!1})})}return t}function Ps(e){async function t({timeout:a,signal:r,headers:s,...n}){await e.post("pin/remote/rm",{timeout:a,signal:r,headers:s,searchParams:me({...n,all:!0})})}return t}function Es(e){const t=String(e);if(t==="undefined")throw Error("endpoint is required");return t[t.length-1]==="/"?t.slice(0,-1):t}function Cs(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:Ss(e.Stat)}}}function Ss(e){switch(e.Status){case"valid":{const{Pinning:t,Pinned:a,Queued:r,Failed:s}=e.PinCount;return{status:"valid",pinCount:{queued:r,pinning:t,pinned:a,failed:s}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function Ns(e){async function t(a,r){const{endpoint:s,key:n,headers:o,timeout:i,signal:u}=r;await e.post("pin/remote/service/add",{timeout:i,signal:u,searchParams:l({arg:[a,Es(s),n]}),headers:o})}return t}function Rs(e){async function t(a={}){const{stat:r,headers:s,timeout:n,signal:o}=a,i=await e.post("pin/remote/service/ls",{timeout:n,signal:o,headers:s,searchParams:r===!0?l({stat:r}):void 0}),{RemoteServices:u}=await i.json();return u.map(Cs)}return t}function Ts(e){async function t(a,r={}){await e.post("pin/remote/service/rm",{signal:r.signal,headers:r.headers,searchParams:l({arg:a})})}return t}function As(e){const t=new je(e);return{add:Ns(t),ls:Rs(t),rm:Ts(t)}}function $s(e){const t=new je(e);return{add:bs(t),ls:vs(t),rm:_s(t),rmAll:Ps(t),service:As(e)}}function Is(e){return{addAll:Xe(e),add:ys(e),ls:ps(e),rmAll:Ge(e),rm:gs(e),remote:$s(e)}}const js=c(e=>{async function t(a={}){const{Strings:r}=await(await e.post("pubsub/ls",{signal:a.signal,searchParams:l(a),headers:a.headers})).json();return ha(r)||[]}return t}),Bs=c(e=>{async function t(a,r={}){const s=await e.post("pubsub/peers",{signal:r.signal,searchParams:l({arg:Be(a),...r}),headers:r.headers}),{Strings:n}=await s.json();return n||[]}return t}),Us=c(e=>{async function t(a,r,s={}){const n=l({arg:Be(a),...s}),o=new AbortController,i=k(o.signal,s.signal);await(await e.post("pubsub/pub",{signal:i,searchParams:n,...await U([r],o,s.headers)})).text()}return t}),ks=(e,t)=>{async function a(r,s){t.unsubscribe(r,s)}return a};class xs{constructor(){this._subs=new Map}subscribe(t,a,r){const s=this._subs.get(t)||[];if(s.find(o=>o.handler===a))throw new Error(`Already subscribed to ${t} with this handler`);const n=new AbortController;return this._subs.set(t,[{handler:a,controller:n}].concat(s)),r&&r.addEventListener("abort",()=>this.unsubscribe(t,a)),n.signal}unsubscribe(t,a){const r=this._subs.get(t)||[];let s;a?(this._subs.set(t,r.filter(n=>n.handler!==a)),s=r.filter(n=>n.handler===a)):(this._subs.set(t,[]),s=r),(this._subs.get(t)||[]).length||this._subs.delete(t),s.forEach(n=>n.controller.abort())}}function Ds(e){const t=new xs;return{ls:js(e),peers:Bs(e),publish:Us(e),subscribe:fa(e,t),unsubscribe:ks(e,t)}}const Ls=c(e=>{async function*t(a={}){yield*(await e.post("refs/local",{signal:a.signal,transform:P,searchParams:l(a),headers:a.headers})).ndjson()}return t}),Fs=c((e,t)=>Object.assign(async function*(r,s={}){const n=Array.isArray(r)?r:[r];yield*(await e.post("refs",{signal:s.signal,searchParams:l({arg:n.map(i=>`${i instanceof Uint8Array?m.decode(i):i}`),...s}),headers:s.headers,transform:P})).ndjson()},{local:Ls(t)})),Os=c(e=>{async function*t(a={}){yield*(await e.post("repo/gc",{signal:a.signal,searchParams:l(a),headers:a.headers,transform:s=>({err:s.Error?new Error(s.Error):null,cid:(s.Key||{})["/"]?m.parse(s.Key["/"]):null})})).ndjson()}return t}),Je=c(e=>{async function t(a={}){const s=await(await e.post("repo/stat",{signal:a.signal,searchParams:l(a),headers:a.headers})).json();return{numObjects:BigInt(s.NumObjects),repoSize:BigInt(s.RepoSize),repoPath:s.RepoPath,version:s.Version,storageMax:BigInt(s.StorageMax)}}return t}),Ms=c(e=>{async function t(a={}){return(await(await e.post("repo/version",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()).Version}return t});function Hs(e){return{gc:Os(e),stat:Je(e),version:Ms(e)}}const qs=c(e=>{async function*t(a={}){yield*(await e.post("stats/bw",{signal:a.signal,searchParams:l(a),headers:a.headers,transform:s=>({totalIn:BigInt(s.TotalIn),totalOut:BigInt(s.TotalOut),rateIn:parseFloat(s.RateIn),rateOut:parseFloat(s.RateOut)})})).ndjson()}return t});function Vs(e){return{bitswap:Fe(e),repo:Je(e),bw:qs(e)}}const zs=c(e=>{async function t(a={}){const r=await e.post("swarm/addrs",{signal:a.signal,searchParams:l(a),headers:a.headers}),{Addrs:s}=await r.json();return Object.keys(s).map(n=>({id:I(n),addrs:(s[n]||[]).map(o=>new $(o))}))}return t}),Ks=c(e=>{async function t(a,r={}){const s=await e.post("swarm/connect",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers}),{Strings:n}=await s.json();return n||[]}return t}),Xs=c(e=>{async function t(a,r={}){const s=await e.post("swarm/disconnect",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers}),{Strings:n}=await s.json();return n||[]}return t}),Gs=c(e=>{async function t(a={}){const r=await e.post("swarm/addrs/local",{signal:a.signal,searchParams:l(a),headers:a.headers}),{Strings:s}=await r.json();return(s||[]).map(n=>new $(n))}return t}),Ws=c(e=>{async function t(a={}){const r=await e.post("swarm/peers",{signal:a.signal,searchParams:l(a),headers:a.headers}),{Peers:s}=await r.json();return(s||[]).map(n=>({addr:new $(n.Addr),peer:I(n.Peer),muxer:n.Muxer,latency:n.Latency,streams:n.Streams,direction:n.Direction==null?void 0:n.Direction===0?"inbound":"outbound"}))}return t});function Qs(e){return{addrs:zs(e),connect:Ks(e),disconnect:Xs(e),localAddrs:Gs(e),peers:Ws(e)}}const Ze=c(e=>{async function*t(a,r={}){const s=new AbortController,n=k(s.signal,r.signal),{headers:o,body:i,total:u,parts:h}=await U(a,s,r.headers),[f,b]=typeof r.progress=="function"?Ys(u,h,r.progress):[void 0,void 0],S=await e.post("add",{searchParams:l({"stream-channels":!0,...r,progress:Boolean(f)}),onUploadProgress:b,signal:n,headers:o,body:i});for await(let p of S.ndjson())p=P(p),p.hash!==void 0?yield Zs(p):f&&f(p.bytes||0,p.name)}return t}),Ys=(e,t,a)=>t?[void 0,Js(e,t,a)]:[a,void 0],Js=(e,t,a)=>{let r=0;const s=t.length;return({loaded:n,total:o})=>{const i=Math.floor(n/o*e);for(;r<s;){const{start:u,end:h,name:f}=t[r];if(i<h){a(i-u,f);break}else a(h-u,f),r+=1}}};function Zs({name:e,hash:t,size:a,mode:r,mtime:s,mtimeNsecs:n}){const o={path:e,cid:m.parse(t),size:parseInt(a)};return r!=null&&(o.mode=parseInt(r,8)),s!=null&&(o.mtime={secs:s,nsecs:n||0}),o}const Se=G;function en(e){return typeof e.stream=="function"?Se(e.stream()):Se(new Response(e).body)}var an=en;async function*W(e){yield e}async function tn(e){if(L(e))return W(ie(e));if(typeof e=="string"||e instanceof String)return W(ie(e.toString()));if(K(e))return an(e);if(X(e)&&(e=G(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const t=re(e),{value:a,done:r}=await t.peek();if(r)return W(new Uint8Array(0));if(t.push(a),Number.isInteger(a))return W(Uint8Array.from(await Me(t)));if(L(a)||typeof a=="string"||a instanceof String)return de(t,ie)}throw w(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function ie(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):te(e.toString())}async function*rn(e,t){if(e==null)throw w(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield Q(e.toString(),t);return}if(L(e)||K(e)){yield Q(e,t);return}if(X(e)&&(e=G(e)),Symbol.iterator in e||Symbol.asyncIterator in e){const a=re(e),{value:r,done:s}=await a.peek();if(s){yield{content:[]};return}if(a.push(r),Number.isInteger(r)||L(r)||typeof r=="string"||r instanceof String){yield Q(a,t);return}throw w(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(le(e)){yield Q(e,t);return}throw w(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Q(e,t){const{path:a,mode:r,mtime:s,content:n}=e,o={path:a||"",mode:He(r),mtime:qe(s)};return n?o.content=await t(n):a||(o.content=await t(e)),o}function sn(e){return rn(e,tn)}function nn(e){const t=Ze(e);return c(()=>{async function a(r,s={}){return await se(t(sn(r),s))}return a})(e)}const on=c(e=>{async function*t(a,r={}){yield*(await e.post("cat",{signal:r.signal,searchParams:l({arg:a.toString(),...r}),headers:r.headers})).iterator()}return t}),cn=c(e=>async(a={})=>(await e.post("commands",{signal:a.signal,searchParams:l(a),headers:a.headers})).json()),ln=c(e=>async(a,r={})=>(await(await e.post("dns",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers})).json()).Path),dn=c(e=>()=>{const t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}),un=c(e=>{async function*t(a,r={}){const s={arg:`${a instanceof Uint8Array?m.decode(a):a}`,...r};s.compressionLevel&&(s["compression-level"]=s.compressionLevel,delete s.compressionLevel),yield*(await e.post("get",{signal:r.signal,searchParams:l(s),headers:r.headers})).iterator()}return t}),ea=c(e=>{async function t(a={}){const s=await(await e.post("id",{signal:a.signal,searchParams:l({arg:a.peerId?a.peerId.toString():void 0,...a}),headers:a.headers})).json(),n={...P(s)};return n.id=I(n.id),n.addresses&&(n.addresses=n.addresses.map(o=>new $(o))),n}return t}),hn=e=>{const t=ea(e);async function a(r={}){const s=await t(r);return Boolean(s&&s.addresses&&s.addresses.length)}return a},fn=c((e,t)=>{async function*a(r,s={}){const n=`${r instanceof Uint8Array?m.decode(r):r}`;async function o(u){let h=u.Hash;if(h.includes("/")){const b=h.startsWith("/ipfs/")?h:`/ipfs/${h}`;h=(await ze(t)(b)).cid}else h=m.parse(h);const f={name:u.Name,path:n+(u.Name?`/${u.Name}`:""),size:u.Size,cid:h,type:mn(u)};return u.Mode&&(f.mode=parseInt(u.Mode,8)),u.Mtime!==void 0&&u.Mtime!==null&&(f.mtime={secs:u.Mtime},u.MtimeNsecs!==void 0&&u.MtimeNsecs!==null&&(f.mtime.nsecs=u.MtimeNsecs)),f}const i=await e.post("ls",{signal:s.signal,searchParams:l({arg:n,...s}),headers:s.headers});for await(let u of i.ndjson()){if(u=u.Objects,!u)throw new Error("expected .Objects in results");if(u=u[0],!u)throw new Error("expected one array in results.Objects");const h=u.Links;if(!Array.isArray(h))throw new Error("expected one array in results.Objects[0].Links");if(!h.length){yield o(u);return}yield*h.map(o)}}return a});function mn(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}const yn=c(e=>{async function t(a={}){const r=await e.post("dns",{signal:a.signal,searchParams:l(a),headers:a.headers});return P(await r.json())}return t}),pn=c(e=>{async function*t(a,r={}){yield*(await e.post("ping",{signal:r.signal,searchParams:l({arg:`${a}`,...r}),headers:r.headers,transform:P})).ndjson()}return t}),gn=c(e=>{async function t(a,r={}){const s=await e.post("resolve",{signal:r.signal,searchParams:l({arg:a,...r}),headers:r.headers}),{Path:n}=await s.json();return n}return t}),wn=c(e=>async(a={})=>{throw w(new Error("Not implemented"),"ERR_NOT_IMPLEMENTED")}),bn=c(e=>{async function t(a={}){await(await e.post("shutdown",{signal:a.signal,searchParams:l(a),headers:a.headers})).text()}return t}),vn=c(e=>{async function t(a={}){const r=await e.post("version",{signal:a.signal,searchParams:l(a),headers:a.headers});return{...P(await r.json()),"ipfs-http-client":"1.0.0"}}return t});function _n(e={}){const t={name:pe.name,code:pe.code,encode:h=>h,decode:h=>h},a=Object.values(ma);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach(h=>a.push(h));const r=new it({bases:a,loadBase:e.ipld&&e.ipld.loadBase}),s=Object.values(ya);[gt,pa,ga,wa,t].concat(e.ipld&&e.ipld.codecs||[]).forEach(h=>s.push(h));const n=new dt({codecs:s,loadCodec:e.ipld&&e.ipld.loadCodec}),o=Object.values(ba);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach(h=>o.push(h));const i=new ht({hashers:o,loadHasher:e.ipld&&e.ipld.loadHasher});return{add:nn(e),addAll:Ze(e),bitswap:Pt(e),block:xt(e),bootstrap:Ht(e),cat:on(e),commands:cn(e),config:Yt(e),dag:nr(n,e),dht:vr(e),diag:Cr(e),dns:ln(e),files:Dr(e),get:un(e),getEndpointConfig:dn(e),id:ea(e),isOnline:hn(e),key:zr(e),log:Wr(e),ls:fn(e),mount:yn(e),name:ts(e),object:ms(n,e),pin:Is(e),ping:pn(e),pubsub:Ds(e),refs:Fs(e),repo:Hs(e),resolve:gn(e),start:wn(e),stats:Vs(e),stop:bn(e),swarm:Qs(e),version:vn(e),bases:r,codecs:n,hashers:i}}const Pn={fileUrl:null,name:null,description:null,properties:[],collection:null,approveRights:!1,agreenTerms:!1},En={key:0},Cn=d("div",{class:"pb-5 text-center"},[d("h2",null,"Create NFTs"),d("p",{class:"lead fw-lighter"},"NFTs can represent essentially any type of digital file, with artists creating NFTs featuring pictures, videos, gifs, audio files, and mixtures of them all. There are also utility NFT tokens, which provide a good or service and contain inherent value coded within them, what's your vision?")],-1),Sn={class:"row g-5"},Nn={class:"col"},Rn={class:"row g-3"},Tn={class:"col-12"},An=d("label",{for:"uploadFile",class:"form-label"},"Upload File",-1),$n=d("p",{class:"fw-lighter"},"Add your unique image / video / audio file",-1),In={key:0,class:"text-center"},jn=["src"],Bn=d("div",{class:"invalid-feedback"}," You must upload a file ",-1),Un={class:"col-12"},kn=d("label",{for:"name",class:"form-label"},"Name",-1),xn=d("p",{class:"fw-lighter"},"Choose a unique name for your NFT",-1),Dn=d("div",{class:"invalid-feedback"}," You must choose a name ",-1),Ln={class:"col-12"},Fn=d("label",{for:"description",class:"form-label"},"Description",-1),On=d("p",{class:"fw-lighter"},"Describe your NFT, help other users understand what's unique about it",-1),Mn={class:"col-12"},Hn=d("label",{for:"properties",class:"form-label"},"Properties",-1),qn=d("p",{class:"fw-lighter"},"List attributes that represents your NFT (color, shape, mood, etc..)",-1),Vn={class:"col-6"},zn=["id","onInput","value"],Kn={class:"col-6"},Xn=["id","onInput","value"],Gn={class:"col-12"},Wn={for:"collection",class:"form-label"},Qn=fe(" Collection "),Yn=d("p",{class:"fw-lighter"},"The collection where your NFT will appear.",-1),Jn={class:"input-group has-validation"},Zn=["value"],eo=d("i",{class:"bi bi-arrow-repeat"},null,-1),ao=[eo],to=d("div",{class:"invalid-feedback"}," You must choose / create a collection ",-1),ro=d("hr",{class:"my-4"},null,-1),so=d("p",{class:"fw-semibold fst-italic"},"Note, the process of minting an NFT is an irreversible process, make sure all the above details are right.",-1),no={class:"form-check"},oo=d("label",{class:"form-check-label fw-lighter",for:"approveRights"},"I approve that I'm the owner or have the rights of publication and sale.",-1),co={class:"form-check"},io=d("label",{class:"form-check-label fw-lighter",for:"agreenTerms"},"I approve NFTrade's Terms & Conditions",-1),lo=d("hr",{class:"my-4"},null,-1),uo=["disabled"],ho={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},fo={key:1,class:"w-100 btn btn-primary btn-lg",type:"button",disabled:""},mo={key:1},yo={class:"pb-5 text-center"},po=he({__name:"create",setup(e){const t="https://ipfs.infura.io/ipfs/QmUC4RmLypFruXTFNn51ZuqAmt4BFzLEpm8n3Wjg3sLP1a",a=_n({url:be+Sa+"/api/v0"}),{account:r,library:s,chainId:n}=Ne();va();const{$compare:o}=_a(),i=xe(),u=De(),h=Le(),f=Pn;Re([r,s,h],()=>{!!s.value&&!!r.value&&(ne(),E())});const b=F(null),S=F("0"),p=F(!1),v=F(!1);async function E(){const R=z[n.value],g=new s.value.eth.Contract(ae,R);b.value=await g.methods.newNFTFeeToken().call(),S.value=await g.methods.newNFTFeeAmount().call();const _=new s.value.eth.Contract(ve,b.value),j=await _.methods.balanceOf(r.value).call();O.exports.greaterThanOrEqual(O.exports.BigInt(j),O.exports.BigInt(S.value))?p.value=!0:p.value=!1;const H=await _.methods.allowance(r.value,R).call();O.exports.greaterThanOrEqual(O.exports.BigInt(H),O.exports.BigInt(S.value))?v.value=!0:v.value=!1}const x=F([]);function ne(){const R=new s.value.eth.Contract(Ta,Ca[n.value]);x.value=[],R.methods.getCollectionListByOwner().call({from:r.value}).then(async g=>{if(g.length>0){const _=g.map(async j=>{x.value.push(j)});await Promise.all(_),x.value.length>0&&(x.value.sort(o("createTime")),f.collection=x.value[0].token)}})}async function aa(R){i.value=!0;const g=R.target.files[0];try{const _=await a.add(g,{progress:H=>console.log(`received: ${H}`)}),j=`${be}${Na}/${_.path}`;f.fileUrl=j,i.value=!1}catch(_){console.log("Error uploading file: ",_),f.fileUrl=null,i.value=!1}}const N=Pa("propertiesList",()=>[{property:null,value:null}]);function ye(R,g,_){if(g==="property"?N.value[_].property=R.target.value:g==="value"&&(N.value[_].value=R.target.value),N.value[_].property&&N.value[_].value&&(N.value[_+1]||N.value.push({property:null,value:null})),!N.value[_].property||!N.value[_].value){const j=N.value.length;j>_+1&&!N.value[j-1].property&&!N.value[j-1].value&&N.value.pop()}}async function ta(){if(i.value=!0,!!r.value&&!!n.value&&f.collection)try{v.value||(await new s.value.eth.Contract(ve,b.value).methods.approve(z[n.value],S.value).send({from:r.value}),v.value=!0),await new s.value.eth.Contract(ae,z[n.value]).methods.newNFT(f.collection,r.value,t).send({from:r.value}),E(),i.value=!1}catch(R){console.info(R),i.value=!1}else i.value=!1}return Te(()=>{!!s.value&&!!r.value&&!!n.value&&(ne(),E())}),(R,g)=>{const _=ot,j=ke,H=Ra;return y(r)?(T(),A("div",En,[Cn,d("div",Sn,[d("div",Nn,[d("form",{class:Ae(`needs-validation ${y(u)?"was-validated":""}`),novalidate:""},[d("div",Rn,[d("div",Tn,[An,$n,d("input",{class:"form-control",type:"file",id:"uploadFile",onChange:aa,required:""},null,32),y(f).fileUrl?(T(),A("div",In,[d("img",{src:y(f).fileUrl,class:"rounded",alt:""},null,8,jn)])):Y("",!0),Bn]),d("div",Un,[kn,xn,D(d("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter the NFT's name","onUpdate:modelValue":g[0]||(g[0]=C=>y(f).name=C),required:""},null,512),[[J,y(f).name]]),Dn]),d("div",Ln,[Fn,On,D(d("textarea",{class:"form-control",id:"description",rows:"3",placeholder:"Enter the NFT's description","onUpdate:modelValue":g[1]||(g[1]=C=>y(f).description=C)},null,512),[[J,y(f).description]])]),d("div",Mn,[Hn,qn,(T(!0),A(ge,null,we(y(N),(C,q)=>(T(),A("div",{class:"row my-3",key:q},[d("div",Vn,[d("input",{type:"text",class:"form-control",id:`property-${q}`,placeholder:"Property",onInput:oe=>ye(oe,"property",q),value:C.property},null,40,zn)]),d("div",Kn,[d("input",{type:"text",class:"form-control",id:`value-${q}`,placeholder:"Value",onInput:oe=>ye(oe,"value",q),value:C.value},null,40,Xn)])]))),128))]),d("div",Gn,[d("label",Wn,[Qn,V(j,null,{default:Ue(()=>[V(_)]),_:1})]),Yn,d("div",Jn,[D(d("select",{class:"form-select",id:"collection","onUpdate:modelValue":g[2]||(g[2]=C=>y(f).collection=C),"aria-label":"Select a Collection",placeholder:"Select a Collection",required:""},[(T(!0),A(ge,null,we(x.value,C=>(T(),A("option",{key:C.token,value:C.token},Z(C.name),9,Zn))),128))],512),[[Ea,y(f).collection]]),d("button",{class:"btn btn-outline-secondary",type:"button",onClick:ne},ao),to])])]),ro,so,d("div",no,[D(d("input",{type:"checkbox",class:"form-check-input",id:"approveRights","onUpdate:modelValue":g[3]||(g[3]=C=>y(f).approveRights=C),required:""},null,512),[[ee,y(f).approveRights]]),oo]),d("div",co,[D(d("input",{type:"checkbox",class:"form-check-input",id:"agreenTerms","onUpdate:modelValue":g[4]||(g[4]=C=>y(f).agreenTerms=C),required:""},null,512),[[ee,y(f).agreenTerms]]),io]),lo,p.value?(T(),A("button",{key:0,class:"w-100 btn btn-primary btn-lg",type:"button",disabled:y(i),onClick:ta},[y(i)?(T(),A("span",ho)):Y("",!0),fe(" "+Z(y(i)?"Loading...":"Create"),1)],8,uo)):p.value?Y("",!0):(T(),A("button",fo," Insufficient Balance "))],2)])])])):(T(),A("div",mo,[d("div",yo,[V(H)])]))}}}),go={class:"container py-5"},No=he({__name:"index",setup(e){return(t,a)=>{const r=po,s=ke;return T(),A("main",null,[d("div",go,[V(s,null,{default:Ue(()=>[V(r)]),_:1})])])}}});export{No as default};
