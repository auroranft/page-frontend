import{_ as z,d as D,u as H,w as F,r as f,b as W,e as V,o as i,c as r,a as e,F as Q,f as G,n as x,g as A,t as v,h as g,i as m,j as N,k as J,l as K,p as X,m as Z,q as ee,s as O,v as P,x as te}from"./entry-edde8571.mjs";import{u as ae}from"./asyncData-26a9fddb.mjs";import{u as L}from"./useLoading-6c61759c.mjs";import{u as ne,a as Y,A as U}from"./AuroranMarket-3591bb2e.mjs";import{u as S}from"./useWeb3-8a74333c.mjs";import{A as $,a as q,b as B,C as se}from"./index-745e66ed.mjs";var R=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"string",name:"symbol",type:"string"},{indexed:!1,internalType:"uint256",name:"royalty",type:"uint256"}],name:"addCollectionEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!0,internalType:"address",name:"owner",type:"address"}],name:"mintNFTEvent",type:"event"},{stateMutability:"payable",type:"fallback",payable:!0},{inputs:[],name:"ADD_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"ADMINQUERY_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"QUERY_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"account_",type:"address"},{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"royalty_",type:"uint256"}],name:"addCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"bool",name:"approve_",type:"bool"}],name:"auditCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAllCollection",outputs:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"tokenURI",type:"string"},{internalType:"uint256",name:"royalty",type:"uint256"},{internalType:"uint256",name:"createTime",type:"uint256"},{internalType:"bool",name:"approve",type:"bool"},{internalType:"bool",name:"show",type:"bool"}],internalType:"struct NFTManage.Collection[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"token_",type:"address"}],name:"getCollection",outputs:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"tokenURI",type:"string"},{internalType:"uint256",name:"royalty",type:"uint256"},{internalType:"uint256",name:"createTime",type:"uint256"},{internalType:"bool",name:"approve",type:"bool"},{internalType:"bool",name:"show",type:"bool"}],internalType:"struct NFTManage.Collection",name:"",type:"tuple"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"owner_",type:"address"}],name:"getCollectionListByOwner",outputs:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"address",name:"owner",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"tokenURI",type:"string"},{internalType:"uint256",name:"royalty",type:"uint256"},{internalType:"uint256",name:"createTime",type:"uint256"},{internalType:"bool",name:"approve",type:"bool"},{internalType:"bool",name:"show",type:"bool"}],internalType:"struct NFTManage.Collection[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"uint256",name:"tokenId_",type:"uint256"}],name:"getNFT",outputs:[{components:[{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"creator",type:"address"},{internalType:"string",name:"tokenURI",type:"string"}],internalType:"struct NFTManage.NFTInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"getNFTList",outputs:[{components:[{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"creator",type:"address"},{internalType:"string",name:"tokenURI",type:"string"}],internalType:"struct NFTManage.NFTInfo[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"collection_",type:"address"}],name:"getNFTListByCollection",outputs:[{components:[{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"creator",type:"address"},{internalType:"string",name:"tokenURI",type:"string"}],internalType:"struct NFTManage.NFTInfo[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"collection",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"newNFT",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function",payable:!0},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account_",type:"address"},{internalType:"address",name:"token_",type:"address"},{internalType:"string",name:"tokenURI_",type:"string"}],name:"setCollectionURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token_",type:"address"},{internalType:"bool",name:"show_",type:"bool"}],name:"showCollection",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function",constant:!0},{stateMutability:"payable",type:"receive",payable:!0}];const E=C=>(X("data-v-71598aed"),C=C(),Z(),C),oe={class:"py-3 bg-light"},le={key:0,class:"container"},ie={class:"row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4"},re={class:"card shadow-sm position-relative"},ue=E(()=>e("span",{class:"visually-hidden"},"Is Show",-1)),ce=[ue],de=E(()=>e("img",{src:ee,class:"card-img-top"},null,-1)),pe={class:"card-body"},ye={class:"card-title"},me={key:0,class:"bi bi-patch-check-fill text-primary"},ve={class:"card-text"},be={class:"list-group list-group-flush"},_e={class:"list-group-item"},he=A(" Token: "),fe=["onClick"],Te={class:"list-group-item"},ge={class:"list-group-item"},ke={class:"list-group-item"},we={class:"card-body"},Ce={class:"btn-group"},Ae=["onClick"],$e=["onClick"],Re={key:1,class:"container"},Me={class:"row py-lg-5"},Ie={class:"col-lg-6 col-md-8 mx-auto"},xe=E(()=>e("p",{class:"lead text-muted"},"No NFTs to show here..",-1)),Ne=E(()=>e("button",{type:"button",class:"btn btn-primary"}," Create ",-1)),De=D({__name:"collection",setup(C){const{$compare:n,$clip:p}=H(),a=L(),t=ne(),{account:s,library:l,chainId:u}=S();F([s,l,u,t],()=>{!!l.value&&!!s.value&&!!u.value&&w()});const d=f("");function k(c,T){d.value=c,p(c,T)}const _=W(),b=f([]);function w(){b.value=[],a.value=!0,new l.value.eth.Contract(R,$[u.value]).methods.getAllCollection().call({from:s.value}).then(async T=>{if(T.length>0){const M=T.map(async o=>{const{data:I}=await ae(o.token,()=>$fetch(o.tokenURI),"$NGj6qtNSga"),j={...o,metadata:I.value};b.value.push(j)});await Promise.all(M),b.value.length>0&&b.value.sort(n("createTime"))}a.value=!1})}V(()=>{w()});function h(c,T){a.value=!0,new l.value.eth.Contract(R,$[u.value]).methods.auditCollection(c,T).send({from:s.value}).then(()=>{t.value=Date.parse(new Date().toString()),a.value=!1}).catch(o=>{console.info(o),a.value=!1})}function y(c,T){a.value=!0,new l.value.eth.Contract(R,$[u.value]).methods.showCollection(c,T).send({from:s.value}).then(()=>{t.value=Date.parse(new Date().toString()),a.value=!1}).catch(o=>{console.info(o),a.value=!1})}return(c,T)=>{const M=K;return i(),r("div",oe,[b.value.length>0?(i(),r("div",le,[e("div",ie,[(i(!0),r(Q,null,G(b.value,o=>(i(),r("div",{class:"col",key:o.token},[e("div",re,[e("span",{class:x(`position-absolute top-0 start-100 translate-middle p-2 border border-light rounded-circle ${o.show?"bg-success":"bg-danger"}`)},ce,2),de,e("div",pe,[e("h5",ye,[A(v(o.symbol)+" - "+v(o.name)+" ",1),o.approve?(i(),r("i",me)):g("",!0)]),e("p",ve,v(o.metadata.description),1)]),e("ul",be,[e("li",_e,[he,e("a",{class:x(`card-link ${m(_)&&o.token===d.value?"text-success":""}`),onClick:I=>k(o.token,I)},[A(v(o.token)+" ",1),e("i",{class:x(`bi ${m(_)&&o.token===d.value?"bi-clipboard2-check":"bi-clipboard2"}`)},null,2)],10,fe)]),e("li",Te,"Owner: "+v(o.owner),1),e("li",ge,"Royalty: "+v(o.royalty)+" %",1),e("li",ke,"Create Time: "+v(c.$parseTime(o.createTime)),1)]),e("div",we,[e("div",Ce,[e("button",{type:"button",class:"btn btn-sm btn-primary",onClick:I=>h(o.token,!o.approve)},v(o.approve?"Audit Cancel":"Audit Pass"),9,Ae),e("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:I=>y(o.token,!o.show)},v(o.show?"Show Cancel":"Show Pass"),9,$e)])])])]))),128))])])):(i(),r("div",Re,[e("div",Me,[e("div",Ie,[xe,e("p",null,[N(M,{to:"/create"},{default:J(()=>[Ne]),_:1})])])])]))])}}});var Fe=z(De,[["__scopeId","data-v-71598aed"]]);const Le={class:"py-3"},Se={class:"container"},Ee=e("h4",null,"Staff Manage",-1),Ue={key:0,class:"alert alert-danger fade show",role:"alert"},qe={class:"mb-3"},Oe=e("label",{for:"account",class:"form-label"},"Account",-1),Ve=e("div",{class:"invalid-feedback"}," Required Account Address ",-1),Be={class:"mb-3"},Qe={for:"account",class:"form-label"},Ge={class:"mb-3"},Pe=["disabled"],Ye={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},je=["disabled"],ze={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},He=D({__name:"staff",setup(C){const n=L(),p=Y(),a=f(null),t=f(!1),{account:s,library:l,chainId:u}=S();F([s,l,u],()=>{!!l.value&&!!s.value&&!!u.value&&k()});const d=f("");async function k(){n.value=!0;const y=new l.value.eth.Contract(U,q[u.value]);d.value=await y.methods.MANAGER_ROLE().call(),n.value=!1}V(()=>{k()});function _(){if(!a.value)t.value=!1;else try{a.value=l.value.utils.toChecksumAddress(a.value),t.value=!1}catch{t.value=!0}}const b=f(!1);async function w(){p.value=!0,n.value=!0;try{const y=new l.value.eth.Contract(U,q[u.value]);b.value=await y.methods.hasRole(d.value,l.value.utils.toChecksumAddress(a.value)).call()}catch{t.value=!0,setTimeout(()=>{t.value=!1},3e3)}p.value=!1,n.value=!1}async function h(){p.value=!0,n.value=!0;try{const y=new l.value.eth.Contract(U,q[u.value]);b.value?await y.methods.removeManager(l.value.utils.toChecksumAddress(a.value)).send({from:s.value}):await y.methods.addManager(l.value.utils.toChecksumAddress(a.value)).send({from:s.value})}catch{t.value=!0,setTimeout(()=>{t.value=!1},3e3)}p.value=!1,n.value=!1}return(y,c)=>(i(),r("div",Le,[e("div",Se,[Ee,t.value?(i(),r("div",Ue," Address is invalid!!! ")):g("",!0),e("form",{class:x(`needs-validation ${m(p)?"was-validated":""}`),novalidate:""},[e("div",qe,[Oe,O(e("input",{class:"form-control",id:"account","onUpdate:modelValue":c[0]||(c[0]=T=>a.value=T),placeholder:"Required Account Address",onInput:_,required:""},null,544),[[P,a.value]]),Ve]),e("div",Be,[e("label",Qe,"Result: "+v(b.value),1)]),e("div",Ge,[e("button",{class:"btn btn-primary",type:"button",disabled:!a.value||m(n)||t.value,onClick:w},[m(n)?(i(),r("span",Ye)):g("",!0),A(" "+v(m(n)?"Loading...":"Query"),1)],8,Pe),e("button",{class:"btn btn-danger ms-3",type:"button",disabled:!a.value||m(n)||t.value,onClick:h},[m(n)?(i(),r("span",ze)):g("",!0),A(" "+v(m(n)?"Loading...":b.value?"Remove":"Approve"),1)],8,je)])],2)])]))}}),We={class:"py-3"},Je={class:"container"},Ke=e("h4",null,"NFTData Approve",-1),Xe={key:0,class:"alert alert-danger fade show",role:"alert"},Ze={class:"mb-3"},et=e("label",{for:"role",class:"form-label"}," Role ",-1),tt=["value"],at=e("div",{class:"invalid-feedback"}," You must choose a role ",-1),nt={class:"mb-3"},st=e("label",{for:"account",class:"form-label"},"Account",-1),ot=e("div",{class:"invalid-feedback"}," Required Account Address ",-1),lt={class:"mb-3"},it={for:"account",class:"form-label"},rt={class:"mb-3"},ut=["disabled"],ct={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},dt=["disabled"],pt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},yt=D({__name:"nftDataApprove",setup(C){const n=L(),p=Y(),a=f(null),t=f(null),s=f(!1),{account:l,library:u,chainId:d}=S();F([l,u,d],()=>{!!u.value&&!!l.value&&!!d.value&&(t.value=B[d.value])}),V(()=>{t.value=B[d.value]});function k(){if(!t.value)s.value=!1;else try{t.value=u.value.utils.toChecksumAddress(t.value),s.value=!1}catch{s.value=!0}}const _=f(!1);async function b(){p.value=!0,n.value=!0;try{const h=new u.value.eth.Contract(R,$[d.value]);_.value=await h.methods.hasRole(a.value,u.value.utils.toChecksumAddress(t.value)).call()}catch{s.value=!0,setTimeout(()=>{s.value=!1},3e3)}p.value=!1,n.value=!1}async function w(){p.value=!0,n.value=!0;try{const h=new u.value.eth.Contract(R,$[d.value]);_.value?await h.methods.revokeRole(u.value.utils.toChecksumAddress(t.value)).send({from:l.value}):await h.methods.grantRole(a.value,u.value.utils.toChecksumAddress(t.value)).send({from:l.value})}catch{s.value=!0,setTimeout(()=>{s.value=!1},3e3)}p.value=!1,n.value=!1}return(h,y)=>(i(),r("div",We,[e("div",Je,[Ke,s.value?(i(),r("div",Xe," Address is invalid!!! ")):g("",!0),e("form",{class:x(`needs-validation ${m(p)?"was-validated":""}`),novalidate:""},[e("div",Ze,[et,O(e("select",{class:"form-select",id:"role","onUpdate:modelValue":y[0]||(y[0]=c=>a.value=c),"aria-label":"Select a Role",placeholder:"Select a Role",required:""},[(i(!0),r(Q,null,G(m(se),c=>(i(),r("option",{key:c.value,value:c.value},v(c.name),9,tt))),128))],512),[[te,a.value]]),at]),e("div",nt,[st,O(e("input",{class:"form-control",id:"account","onUpdate:modelValue":y[1]||(y[1]=c=>t.value=c),placeholder:"Required Account Address",onInput:k,required:""},null,544),[[P,t.value]]),ot]),e("div",lt,[e("label",it,"Result: "+v(_.value),1)]),e("div",rt,[e("button",{class:"btn btn-primary",type:"button",disabled:!a.value||!t.value||m(n)||s.value,onClick:b},[m(n)?(i(),r("span",ct)):g("",!0),A(" "+v(m(n)?"Loading...":"Query"),1)],8,ut),e("button",{class:"btn btn-danger ms-3",type:"button",disabled:!a.value||!t.value||m(n)||s.value,onClick:w},[m(n)?(i(),r("span",pt)):g("",!0),A(" "+v(m(n)?"Loading...":_.value?"Remove":"Approve"),1)],8,dt)])],2)])]))}}),mt={key:0,class:"container py-5"},vt={class:"nav nav-tabs",id:"manageTab",role:"tablist"},bt=e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active",id:"collection-tab","data-bs-toggle":"tab","data-bs-target":"#collection-tab-pane",type:"button",role:"tab","aria-controls":"collection-tab-pane","aria-selected":"true"}," Collection Manage ")],-1),_t={key:0,class:"nav-item",role:"presentation"},ht=e("button",{class:"nav-link",id:"staff-tab","data-bs-toggle":"tab","data-bs-target":"#staff-tab-pane",type:"button",role:"tab","aria-controls":"staff-tab-pane","aria-selected":"false"}," Market Manage ",-1),ft=[ht],Tt={key:1,class:"nav-item",role:"presentation"},gt=e("button",{class:"nav-link",id:"nftData-approve-tab","data-bs-toggle":"tab","data-bs-target":"#nftData-approve-tab-pane",type:"button",role:"tab","aria-controls":"nftData-approve-tab-pane","aria-selected":"false"}," NFTData Approve ",-1),kt=[gt],wt={class:"tab-content",id:"manageTabContent"},Ct={class:"tab-pane fade show active",id:"collection-tab-pane",role:"tabpanel","aria-labelledby":"collection-tab",tabindex:"0"},At={key:0,class:"tab-pane fade",id:"staff-tab-pane",role:"tabpanel","aria-labelledby":"staff-tab",tabindex:"0"},$t={key:1,class:"tab-pane fade",id:"nftData-approve-tab-pane",role:"tabpanel","aria-labelledby":"nftData-approve-tab",tabindex:"0"},Rt={key:1,class:"container py-5"},Mt=e("h1",null,"No permission",-1),It=[Mt],Et=D({__name:"manage",setup(C){const n=L(),{account:p,library:a,chainId:t}=S();F([p,a,t],()=>{!!a.value&&!!p.value&&!!t.value&&u()});const s=f(!1),l=f(!1);async function u(){n.value=!0;const d=new a.value.eth.Contract(R,$[t.value]),k=await d.methods.DEFAULT_ADMIN_ROLE().call(),_=await d.methods.ADMIN_ROLE().call();s.value=await d.methods.hasRole(k,p.value).call(),l.value=await d.methods.hasRole(_,p.value).call(),n.value=!1}return(d,k)=>{const _=Fe,b=He,w=yt;return i(),r("main",null,[l.value?(i(),r("div",mt,[e("ul",vt,[bt,s.value?(i(),r("li",_t,ft)):g("",!0),s.value?(i(),r("li",Tt,kt)):g("",!0)]),e("div",wt,[e("div",Ct,[N(_)]),s.value?(i(),r("div",At,[N(b)])):g("",!0),s.value?(i(),r("div",$t,[N(w)])):g("",!0)])])):(i(),r("div",Rt,It))])}}});export{Et as default};
