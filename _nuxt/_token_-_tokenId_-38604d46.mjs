import{d as O,r as x,w as Y,e as H,J,o,c as l,a as e,n as K,i as d,s as A,v as R,t as b,h as $,j as F,K as X,g as B,L as C,k as q,M as Z,_ as ee,N as te,u as ne,F as ae,f as se,q as oe,O as ie,l as le,p as de,m as re}from"./entry-edde8571.mjs";import{u as Q}from"./useLoading-6c61759c.mjs";import{a as ue,u as j,A as E}from"./AuroranMarket-3591bb2e.mjs";import{u as W}from"./useWeb3-8a74333c.mjs";import{T as pe,a as D,b as z}from"./index-745e66ed.mjs";import{A as G}from"./AuroranNFTQuery-e3f22263.mjs";import{_ as ce,a as ye,b as me}from"./historyList-95615b35.mjs";import{u as fe}from"./asyncData-26a9fddb.mjs";var ve=[{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"MINTER_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"minterAddress",type:"address"}],name:"addMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"minterAddress",type:"address"}],name:"removeMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"baseURI_",type:"string"}],name:"setBaseURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"string",name:"uri",type:"string"}],name:"safeMint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];const _e={style:{display:"inline-block"}},be=["disabled"],he={class:"modal fade",id:"modalNftList",tabindex:"-1","aria-labelledby":"modalNftListLabel","aria-hidden":"true"},ke={class:"modal-dialog modal-lg modal-dialog-centered"},Te={class:"modal-content"},ge=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"modalNftListLabel"},"NFT List"),e("button",{id:"closeModalNftList",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ie={class:"modal-body"},xe={class:"row g-5"},we={class:"col"},Ae={class:"my-4"},$e=e("label",{for:"token",class:"form-label"},"Token",-1),Me=e("div",{class:"invalid-feedback"}," You must input token ",-1),Le={class:"my-4"},Ne=e("label",{for:"tokenId",class:"form-label"},"TokenId",-1),Re=e("div",{class:"invalid-feedback"}," You must input tokenId ",-1),Ce={class:"my-4"},De=e("label",{for:"payToken",class:"form-label"},"PayToken",-1),Be=e("div",{class:"invalid-feedback"}," You must input payToken ",-1),Fe={class:"my-4"},Se=e("label",{for:"payAmount",class:"form-label"},"PayAmount",-1),Ve=e("div",{class:"invalid-feedback"}," You must input payAmount ",-1),Ue={class:"my-4"},qe=e("label",{for:"isBid",class:"form-label"},"Bid",-1),Ee={class:"form-check form-check-inline"},Oe=["checked"],Pe=e("label",{class:"form-check-label",for:"bidLimited"},"Limited",-1),Ye={class:"form-check form-check-inline"},He=["checked"],Qe=e("label",{class:"form-check-label",for:"bidAuction"},"Auction",-1),je={key:0,class:"my-4"},We={for:"bonusRate",class:"form-label"},ze=["max","required"],Ge={key:1,class:"my-4"},Je=e("label",{for:"endTime",class:"form-label"},"EndTime",-1),Ke=e("div",{class:"invalid-feedback"}," You must input endTime ",-1),Xe={class:"form-check"},Ze=e("label",{class:"form-check-label fw-lighter",for:"agreenTerms"},"I approve NFTrade's Terms & Conditions",-1),et=e("hr",{class:"my-4"},null,-1),tt=["disabled"],nt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},at=O({__name:"nftList",props:{nftInfo:null},setup(h){const M=h,i=x();i.value=M.nftInfo;const u=Q(),p=ue(),m=j(),{account:f,library:c,chainId:r}=W();Y([f],()=>{!!f.value&&!!c.value&&!!r.value&&g()});const k=new Date(Date.parse(new Date().toString())+60*10*1e3),n=new Date(Date.parse(new Date().toString())+60*60*24*30*1e3),L=x(k),t=x({token:i.value.nftInfo.token,tokenId:i.value.nftInfo.tokenId,isBid:!1,payToken:null,payAmount:null,bonusRate:0,endTime:0,agreenTerms:!1}),v=x(!0),T=x(0),_=x(0);async function g(){t.value.token=i.value.nftInfo.token,t.value.tokenId=i.value.nftInfo.tokenId,t.value.payToken=pe[r.value];const y=new c.value.eth.Contract(E,D[r.value]);_.value=await y.methods.maxBonusRate().call({from:f.value});const I=await new c.value.eth.Contract(G,z[r.value]).methods.getNFT(i.value.nftInfo.token,i.value.nftInfo.tokenId).call(),s={...i,...I};i.value=s}function w(y){v.value=y}function N(y){T.value=y.target.value}async function V(){if(p.value=!0,u.value=!0,t.value.endTime=Date.parse(new Date(L.value).toString())/1e3,t.value.token&&t.value.tokenId&&t.value.payToken&&t.value.payAmount&&t.value.agreenTerms){t.value.isBid=v.value;const y=new c.value.eth.Contract(ve,i.value.nftInfo.token);await y.methods.isApprovedForAll(f.value,D[r.value]).call()||await y.methods.setApprovalForAll(D[r.value],!0).send({from:f.value}),new c.value.eth.Contract(E,D[r.value]).methods.list(t.value.token,t.value.tokenId,t.value.isBid,t.value.payToken,c.value.utils.toWei(t.value.payAmount.toString(),"ether"),t.value.bonusRate,t.value.endTime).send({from:f.value}).then(()=>{u.value=!1,m.value=Date.parse(new Date().toString()),document.getElementById("closeModalNftList").click()}).catch(s=>{console.info(s),u.value=!1})}else u.value=!1}return H(()=>{g()}),(y,a)=>{const I=J("Datepicker");return o(),l("div",_e,[e("button",{type:"button",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#modalNftList",disabled:i.value.nftSale.onSale}," List ",8,be),e("div",he,[e("div",ke,[e("div",Te,[ge,e("div",Ie,[e("div",xe,[e("div",we,[e("form",{class:K(`needs-validation ${d(p)?"was-validated":""}`),novalidate:""},[e("div",Ae,[$e,A(e("input",{type:"text",readonly:"",class:"form-control-plaintext",id:"token","onUpdate:modelValue":a[0]||(a[0]=s=>t.value.token=s),required:""},null,512),[[R,t.value.token]]),Me]),e("div",Le,[Ne,A(e("input",{type:"text",readonly:"",class:"form-control-plaintext",id:"tokenId","onUpdate:modelValue":a[1]||(a[1]=s=>t.value.tokenId=s),required:""},null,512),[[R,t.value.tokenId]]),Re]),e("div",Ce,[De,A(e("input",{type:"text",readonly:"",class:"form-control-plaintext",id:"payToken","onUpdate:modelValue":a[2]||(a[2]=s=>t.value.payToken=s),required:""},null,512),[[R,t.value.payToken]]),Be]),e("div",Fe,[Se,A(e("input",{type:"number",class:"form-control",id:"payAmount","onUpdate:modelValue":a[3]||(a[3]=s=>t.value.payAmount=s),required:""},null,512),[[R,t.value.payAmount]]),Ve]),e("div",Ue,[qe,e("div",null,[e("div",Ee,[e("input",{class:"form-check-input",type:"radio",name:"isBid",id:"bidLimited",value:!1,checked:!v.value,onChange:a[4]||(a[4]=s=>w(!1))},null,40,Oe),Pe]),e("div",Ye,[e("input",{class:"form-check-input",type:"radio",name:"isBid",id:"bidAuction",value:!0,checked:v.value,onChange:a[5]||(a[5]=s=>w(!0))},null,40,He),Qe])])]),v.value?(o(),l("div",je,[e("label",We,"Bonus Rate: "+b(T.value)+" %",1),A(e("input",{type:"range",class:"form-range",min:"0",max:_.value,step:"1",id:"bonusRate","onUpdate:modelValue":a[6]||(a[6]=s=>t.value.bonusRate=s),onChange:N,required:v.value},null,40,ze),[[R,t.value.bonusRate]])])):$("",!0),v.value?(o(),l("div",Ge,[Je,F(I,{id:"endTime",required:v.value,minDate:d(k),maxDate:d(n),modelValue:L.value,"onUpdate:modelValue":a[7]||(a[7]=s=>L.value=s),format:"yyyy-MM-dd HH:mm",modelType:"timestamp"},null,8,["required","minDate","maxDate","modelValue"]),Ke])):$("",!0),e("div",Xe,[A(e("input",{type:"checkbox",class:"form-check-input",id:"agreenTerms","onUpdate:modelValue":a[8]||(a[8]=s=>t.value.agreenTerms=s),required:""},null,512),[[X,t.value.agreenTerms]]),Ze]),et,e("button",{class:"w-100 btn btn-primary btn-lg",type:"button",disabled:d(u),onClick:V},[d(u)?(o(),l("span",nt)):$("",!0),B(" "+b(d(u)?"Loading...":"NFT List"),1)],8,tt)],2)])])])])])])])}}}),st=O({__name:"list",props:{nftInfo:null},setup(h){const i=h.nftInfo;return(u,p)=>{const m=at,f=Z;return o(),C(f,null,{default:q(()=>[F(m,{nftInfo:d(i)},null,8,["nftInfo"])]),_:1})}}}),S=h=>(de("data-v-1a232911"),h=h(),re(),h),ot={key:0,class:"py-5 container"},it={class:"row py-lg-5"},lt={class:"col-lg-6 col-md-12"},dt={class:"ratio ratio-1x1 nft-img"},rt=["src"],ut={key:1,src:oe},pt={class:"col-lg-6 col-md-12"},ct={class:"card border-0"},yt={class:"card-body"},mt={class:"card-text"},ft={key:0,class:"bi bi-patch-check-fill text-primary"},vt={class:"card-body"},_t={class:"card-title"},bt={class:"card-text"},ht=B(" Owned: "),kt={class:"card-text"},Tt={class:"d-flex justify-content-start align-items-center"},gt=["disabled"],It={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},xt=ie('<div class="d-flex justify-content-start align-items-center pt-5 pb-5" id="list-example" data-v-1a232911><a href="#history" data-v-1a232911>History <i class="bi bi-link-45deg" data-v-1a232911></i></a><a class="ms-3" href="#offers" data-v-1a232911>Offers <i class="bi bi-link-45deg" data-v-1a232911></i></a><a class="ms-3" href="#listings" data-v-1a232911>Listings <i class="bi bi-link-45deg" data-v-1a232911></i></a></div>',1),wt={key:0,class:"mb-5"},At=S(()=>e("h4",null,"Properties",-1)),$t={class:"table table-bordered"},Mt=S(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Property"),e("th",{scope:"col"},"Value")])],-1)),Lt={key:0},Nt={key:1},Rt=S(()=>e("tr",{class:"text-center fw-lighter"},[e("td",{colspan:"5"},"No Data")],-1)),Ct=[Rt],Dt={"data-bs-spy":"scroll","data-bs-target":"#list-example","data-bs-offset":"0","data-bs-smooth-scroll":"true",class:"scrollspy-example",tabindex:"0"},Bt={class:"mb-5",id:"listings"},Ft={class:"mb-5",id:"offers"},St={class:"mb-5",id:"history"},Vt={key:1,class:"py-5 container"},Ut=S(()=>e("div",{class:"row"},[e("div",{class:"text-center"},[e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")])])],-1)),qt=[Ut],Et=O({__name:"[token]-[tokenId]",setup(h){const M=te(),i=M.params.token,u=M.params.tokenId,p=Q(),m=j(),{$truncateAccount:f}=ne(),{account:c,library:r,chainId:k}=W();Y([c,r,k,m],()=>{!!r.value&&!!c.value&&!!k.value&&t()});const n=x();async function L(){p.value=!0;const T=new r.value.eth.Contract(G,z[k.value]),_=await T.methods.getNFT(i,u).call(),g=await T.methods.getCollection(_.nftInfo.token).call(),{data:w}=await fe(_.nftInfo.nftId,()=>$fetch(_.tokenURI),"$oMR5ii4S3b"),N={..._,collection:g,metadata:w.value};n.value=N,p.value=!1}function t(){!!r.value&&!!c.value&&!!k.value&&L()}function v(){!!i&&!!u&&(p.value=!0,new r.value.eth.Contract(E,D[k.value]).methods.listCancelled(i,u).send({from:c.value}).then(()=>{p.value=!1,m.value=Date.parse(new Date().toString())}).catch(_=>{console.info(_),p.value=!1}))}return H(()=>{t()}),(T,_)=>{var a,I,s,P;const g=le,w=st,N=ce,V=ye,y=me;return o(),l("main",null,[(a=n.value)!=null&&a.nftInfo.token?(o(),l("section",ot,[e("div",it,[e("div",lt,[e("div",dt,[(I=n.value.metadata)!=null&&I.fileUrl?(o(),l("img",{key:0,src:(s=n.value.metadata)==null?void 0:s.fileUrl},null,8,rt)):(o(),l("img",ut))])]),e("div",pt,[e("div",ct,[e("div",yt,[e("p",mt,[F(g,{to:`/account/nfts/${n.value.collection.token}`},{default:q(()=>[B(b(n.value.collection.name),1)]),_:1},8,["to"]),n.value.collection.approve?(o(),l("i",ft)):$("",!0)])]),e("div",vt,[e("h3",_t,b(n.value.metadata.name?n.value.metadata.name:n.value.collection.name+" #"+n.value.nftInfo.tokenId),1),e("p",bt,[ht,F(g,{to:`/account/${n.value.nftSale.owner}`},{default:q(()=>[B(b(d(f)(n.value.nftSale.owner)),1)]),_:1},8,["to"])]),e("p",kt," Creator Royalty: "+b(n.value.collection.royalty)+" % ",1),e("div",Tt,[(o(),C(w,{nftInfo:n.value,key:d(m)},null,8,["nftInfo"])),e("button",{class:"btn btn-danger ms-3",type:"button",disabled:!n.value.nftSale.onSale||d(p),onClick:v},[d(p)?(o(),l("span",It)):$("",!0),B(" "+b(d(p)?"Loading...":"List Cancelled"),1)],8,gt)])])])])]),xt,(P=n.value.metadata)!=null&&P.properties?(o(),l("div",wt,[At,e("table",$t,[Mt,n.value.metadata.properties.length>0?(o(),l("tbody",Lt,[(o(!0),l(ae,null,se(n.value.metadata.properties,U=>(o(),l("tr",{key:U.property},[e("th",null,b(U.property),1),e("td",null,b(U.value),1)]))),128))])):(o(),l("tbody",Nt,Ct))])])):$("",!0),e("div",Dt,[e("div",Bt,[(o(),C(N,{nftInfo:n.value,key:d(m)},null,8,["nftInfo"]))]),e("div",Ft,[(o(),C(V,{nftInfo:n.value,key:d(m)},null,8,["nftInfo"]))]),e("div",St,[(o(),C(y,{nftInfo:n.value,key:d(m)},null,8,["nftInfo"]))])])])):(o(),l("section",Vt,qt))])}}});var Gt=ee(Et,[["__scopeId","data-v-1a232911"]]);export{Gt as default};
